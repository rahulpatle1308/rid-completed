<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher's Advanced Dashboard with Test Services</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }

        /* Main Container */
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        header {
            background: linear-gradient(90deg, #2c3e50, #4a6491);
            color: white;
            padding: 25px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo i {
            font-size: 2.2rem;
            color: #3498db;
        }

        .logo h1 {
            font-size: 1.8rem;
            font-weight: 700;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
            font-weight: 500;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #3498db;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .main-content {
            display: flex;
            min-height: 600px;
        }

        .sidebar {
            width: 250px;
            background-color: #f8f9fa;
            padding: 25px 20px;
            border-right: 1px solid #eaeaea;
        }

        .sidebar h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #ddd;
            font-size: 1.2rem;
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            margin-bottom: 10px;
            position: relative;
        }

        .nav-item a {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            color: #555;
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s;
        }

        .nav-item a:hover,
        .nav-item.active a {
            background-color: #e3f2fd;
            color: #3498db;
        }

        .nav-item i {
            width: 20px;
            text-align: center;
        }

        .locked {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .locked:hover {
            background-color: transparent !important;
            color: #555 !important;
        }

        .lock-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #f39c12;
            font-size: 0.8rem;
        }

        .content-area {
            flex: 1;
            padding: 30px;
            position: relative;
        }

        .page-title {
            color: #2c3e50;
            margin-bottom: 25px;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .page-title i {
            color: #3498db;
        }

        .card {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid #eee;
        }

        .card h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .payment-section {
            text-align: center;
            max-width: 500px;
            margin: 0 auto;
        }

        .payment-icon {
            font-size: 4rem;
            color: #27ae60;
            margin-bottom: 20px;
        }

        .payment-btn {
            background: linear-gradient(90deg, #27ae60, #2ecc71);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1rem;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 20px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .payment-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.3);
        }

        .test-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group.full-width {
            grid-column: 1 / span 2;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 500;
        }

        input,
        select,
        textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
        }

        textarea {
            min-height: 120px;
            resize: vertical;
        }

        .form-actions {
            grid-column: 1 / span 2;
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 10px;
        }

        .btn {
            padding: 12px 25px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background-color: #3498db;
            color: white;
        }

        .btn-secondary {
            background-color: #ecf0f1;
            color: #333;
        }

        .btn-success {
            background-color: #27ae60;
            color: white;
        }

        .btn-primary:hover {
            background-color: #2980b9;
        }

        .btn-secondary:hover {
            background-color: #d5dbdb;
        }

        .btn-success:hover {
            background-color: #219653;
        }

        .btn:disabled,
        .btn.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn:disabled:hover,
        .btn.disabled:hover {
            transform: none;
            box-shadow: none;
        }

        .hidden {
            display: none;
        }

        /* Test Services Cards Styling */
        .cards-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }

        .course-card {
            background-color: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: 1px solid #eee;
        }

        .course-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .course-card-header {
            padding: 25px 25px 15px;
            text-align: center;
            color: white;
        }

        .card-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .card-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .card-subtitle {
            font-size: 1rem;
            opacity: 0.9;
        }

        .course-card-body {
            padding: 20px 25px;
        }

        .viewers-count {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-bottom: 20px;
            color: #7f8c8d;
            font-weight: 500;
        }

        .viewers-count i {
            color: #e74c3c;
        }

        .level-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 15px;
            text-align: center;
            width: 100%;
        }

        .level-beginner {
            background-color: #e8f6f3;
            color: #1abc9c;
            border: 1px solid #a3e4d7;
        }

        .level-advanced {
            background-color: #fef9e7;
            color: #f39c12;
            border: 1px solid #f9e79f;
        }

        .level-intermediate {
            background-color: #ebf5fb;
            color: #3498db;
            border: 1px solid #aed6f1;
        }

        .course-card-footer {
            padding: 20px 25px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: center;
        }

        .details-btn {
            background: linear-gradient(90deg, #27ae60, #2ecc71);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            width: 100%;
            justify-content: center;
        }

        .details-btn:hover {
            background: linear-gradient(90deg, #219653, #27ae60);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.3);
        }

        /* Test Service Page */
        .service-page {
            display: none;
        }

        .service-header {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }

        .service-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .service-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .service-description {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }

        /* Test Services Cards */
        .test-services-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .test-service-card {
            background-color: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: 1px solid #eee;
        }

        .test-service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .test-service-header {
            padding: 25px 25px 15px;
            text-align: center;
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }

        .test-service-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .test-service-name {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .test-service-type {
            font-size: 1rem;
            opacity: 0.9;
        }

        .test-service-body {
            padding: 20px 25px;
        }

        .test-service-level {
            display: inline-block;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 15px;
            text-align: center;
            width: 100%;
        }

        .test-service-description {
            color: #7f8c8d;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .test-service-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #2c3e50;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-top: 5px;
        }

        .test-service-footer {
            padding: 20px 25px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: center;
        }

        .enroll-btn {
            background: linear-gradient(90deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            width: 100%;
            justify-content: center;
        }

        .enroll-btn:hover {
            background: linear-gradient(90deg, #c0392b, #a93226);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
        }

        .enroll-btn i {
            font-size: 1.1rem;
        }

        /* Test Services Header */
        .services-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .back-btn {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }

        .back-btn:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #7f8c8d;
        }

        .empty-state i {
            font-size: 4rem;
            margin-bottom: 20px;
            color: #bdc3c7;
        }

        .empty-state h3 {
            font-size: 1.8rem;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        /* Footer */
        footer {
            text-align: center;
            margin-top: 50px;
            padding: 20px;
            color: #7f8c8d;
            border-top: 1px solid #eee;
        }

        /* Lock Overlay */
        .lock-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            border-radius: 10px;
        }

        .lock-message {
            text-align: center;
            padding: 30px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            max-width: 400px;
        }

        .lock-icon-large {
            font-size: 3rem;
            color: #f39c12;
            margin-bottom: 15px;
        }

        /* Service Stats */
        .service-stats {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }

        .stat-card {
            flex: 1;
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #3498db;
        }

        /* Create Test Card Button */
        .create-test-card-btn {
            background: linear-gradient(90deg, #9b59b6, #8e44ad);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            margin-bottom: 20px;
        }

        .create-test-card-btn:hover {
            background: linear-gradient(90deg, #8e44ad, #732d91);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(155, 89, 182, 0.3);
        }

        /* Quick Create Section */
        .quick-create-section {
            margin-top: 30px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 10px;
        }

        .quick-create-form {
            display: flex;
            gap: 15px;
            align-items: flex-end;
        }

        .quick-create-input {
            flex: 1;
        }

        .quick-create-btn {
            background: linear-gradient(90deg, #9b59b6, #8e44ad);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            white-space: nowrap;
        }

        /* Color options */
        .color-options {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .color-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .color-option.selected {
            border-color: #333;
            transform: scale(1.1);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid #eaeaea;
            }

            .test-form {
                grid-template-columns: 1fr;
            }

            .form-group.full-width,
            .form-actions {
                grid-column: 1;
            }

            .cards-container,
            .test-services-container {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }

            .service-stats {
                flex-direction: column;
            }

            .quick-create-form {
                flex-direction: column;
                align-items: stretch;
            }
        }

        @media (max-width: 480px) {

            .cards-container,
            .test-services-container {
                grid-template-columns: 1fr;
            }

            .form-actions {
                flex-direction: column;
            }
        }
    </style>
</head>

<body>
    <div class="main-container">
        <header>
            <div class="logo">
                <i class="fas fa-chalkboard-teacher"></i>
                <h1>Teacher's Advanced Dashboard</h1>
            </div>
            <div class="user-info">
                <div class="user-avatar">
                    <%= teacher.name.split(' ').map(n=>n[0]).join('') %>
</div>

                <div>
                    <div>Welcome, <strong>
                            <%= teacher.name %>
                        </strong></div>
                    <div style="font-size: 0.9rem;" id="account-status">Free Account</div>
                </div>

            </div>
        </header>

        <div class="main-content">
            <nav class="sidebar">
                <h3>Navigation</h3>
                <ul class="nav-menu">
                    <li class="nav-item active" id="nav-payment">
                        <a href="#">
                            <i class="fas fa-credit-card"></i>
                            <span>Payment</span>
                        </a>
                    </li>
                    <li class="nav-item locked" id="nav-dashboard">
                        <a href="#">
                            <i class="fas fa-tachometer-alt"></i>
                            <span>Dashboard</span>
                            <i class="fas fa-lock lock-icon"></i>
                        </a>
                    </li>
                    <li class="nav-item locked" id="nav-tests">
                        <a href="#">
                            <i class="fas fa-file-alt"></i>
                            <span>Create Tests cards</span>
                            <i class="fas fa-lock lock-icon"></i>
                        </a>
                    </li>
                    <li class="nav-item locked" id="nav-templates">
                        <a href="#">
                            <i class="fas fa-layer-group"></i>
                            <span>Templates</span>
                            <i class="fas fa-lock lock-icon"></i>
                        </a>
                    </li>

                    <li class="nav-item locked" id="nav-test-services">
                        <a href="#">
                            <i class="fas fa-clipboard-list"></i>
                            <span>Test Services</span>
                            <i class="fas fa-lock lock-icon"></i>
                        </a>
                    </li>

                    <li class="nav-item locked" id="nav-python">
                        <a href="#">
                            <i class="fab fa-python"></i>
                            <span>Python Test Service</span>
                            <i class="fas fa-lock lock-icon"></i>
                        </a>
                    </li>
                    <li class="nav-item locked">
                        <a href="#">
                            <i class="fas fa-chart-bar"></i>
                            <span>Analytics</span>
                            <i class="fas fa-lock lock-icon"></i>
                        </a>
                    </li>
                    <li class="nav-item locked">
                        <a href="#">
                            <i class="fas fa-cog"></i>
                            <span>Settings</span>
                            <i class="fas fa-lock lock-icon"></i>
                        </a>
                    </li>
                </ul>
            </nav>

            <div class="content-area">
                <!-- Payment Section -->
                <div id="payment-section">
                    <div class="page-title">
                        <i class="fas fa-credit-card"></i>
                        <h2>Complete Payment to Access All Features</h2>
                    </div>

                    <div class="card payment-section">
                        <div class="payment-icon">
                            <i class="fas fa-lock"></i>
                        </div>
                        <h3>Upgrade to Premium Version</h3>
                        <p><strong>Current Status: <span id="current-status">Free Account (Limited
                                    Features)</span></strong></p>
                        <p>Complete payment to unlock all premium features including:</p>
                        <ul style="text-align: left; margin: 20px 0; padding-left: 20px;">
                            <li>Unlimited Test Creation</li>
                            <li>Test Services Dashboard</li>
                            <li>Automatic Template Creation</li>
                            <li>Python Test Service</li>
                            <li>View All Tests by Template</li>
                            <li>Advanced Analytics</li>
                            <li>Priority Support</li>
                        </ul>
                        <p><strong>Total: $49.99/year (One Time Payment)</strong></p>
                        <button class="payment-btn" id="make-payment">
                            <i class="fas fa-lock-open"></i> Complete Payment Now
                        </button>
                        <div style="margin-top: 15px; font-size: 0.9rem; color: #7f8c8d;">
                            <i class="fas fa-info-circle"></i> After payment, all features will be unlocked immediately
                        </div>
                    </div>

                    <div class="card">
                        <h3><i class="fas fa-ban"></i> Currently Locked Features</h3>
                        <div class="service-stats">
                            <div class="stat-card">
                                <div class="stat-number">0</div>
                                <div>Tests Created</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">0</div>
                                <div>Templates Available</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">0</div>
                                <div>Subjects Unlocked</div>
                            </div>
                        </div>
                        <p style="text-align: center; margin-top: 15px; color: #e74c3c;">
                            <i class="fas fa-exclamation-triangle"></i> Complete payment to unlock these features
                        </p>
                    </div>
                </div>

                <!-- Dashboard Section -->
                <div id="dashboard-section" class="hidden">
                    <div class="lock-overlay" id="dashboard-lock">
                        <div class="lock-message">
                            <div class="lock-icon-large">
                                <i class="fas fa-lock"></i>
                            </div>
                            <h3>Dashboard Locked</h3>
                            <p>This feature is only available after payment.</p>
                            <p>Please complete the payment to access the advanced dashboard.</p>
                            <button class="btn btn-primary" style="margin-top: 20px;" id="goto-payment-from-dashboard">
                                <i class="fas fa-credit-card"></i> Go to Payment
                            </button>
                        </div>
                    </div>

                    <div class="page-title">
                        <i class="fas fa-tachometer-alt"></i>
                        <h2>Advanced Dashboard</h2>
                    </div>

                    <div class="card">
                        <h3>Welcome to Your Advanced Dashboard</h3>
                        <p>You now have access to all premium features. Start by creating your first test or explore the
                            Test Services.</p>

                        <div class="service-stats">
                            <div class="stat-card">
                                <div class="stat-number" id="total-tests">0</div>
                                <div>Total Tests</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="total-questions">0</div>
                                <div>Total Questions</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="active-templates">0</div>
                                <div>Active Templates</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Create Tests Section -->
                <div id="create-test-section" class="hidden">
                    <div class="lock-overlay" id="create-test-lock">
                        <div class="lock-message">
                            <div class="lock-icon-large">
                                <i class="fas fa-lock"></i>
                            </div>
                            <h3>Test Creation Locked</h3>
                            <p>This feature is only available after payment.</p>
                            <p>Please complete the payment to create unlimited tests.</p>
                            <button class="btn btn-primary" style="margin-top: 20px;" id="goto-payment-from-tests">
                                <i class="fas fa-credit-card"></i> Go to Payment
                            </button>
                        </div>
                    </div>

                    <div class="page-title">
                        <i class="fas fa-file-alt"></i>
                        <h2>Create New Test cards</h2>
                    </div>

                    <div class="card">
                        <h3><i class="fas fa-plus-circle"></i> Test Details</h3>
                        <form id="test-creation-form" class="test-form">
                            <div class="form-group">
                                <label for="test-name">Test Name</label>
                                <input type="text" id="test-name" placeholder="Enter test name" required disabled>
                            </div>

                            <div class="form-group">
                                <label for="test-subject">Subject (Type any subject)</label>
                                <input type="text" id="test-subject"
                                    placeholder="Enter any subject (e.g., Mathematics, Science, etc.)" required
                                    disabled>
                            </div>

                            <div class="form-group">
                                <label for="test-duration">Duration (minutes)</label>
                                <input type="number" id="test-duration" min="5" max="180" value="60" disabled>
                            </div>

                            <div class="form-group">
                                <label for="test-difficulty">Difficulty Level</label>
                                <select id="test-difficulty" disabled>
                                    <option value="Beginner">Beginner</option>
                                    <option value="Intermediate" selected>Intermediate</option>
                                    <option value="Advanced">Advanced</option>
                                </select>
                            </div>

                            <div class="form-group full-width">
                                <label for="test-description">Test Description</label>
                                <textarea id="test-description" placeholder="Describe what this test covers..."
                                    disabled></textarea>
                            </div>

                            <div class="form-actions">
                                <button type="button" class="btn btn-secondary disabled" id="reset-form" disabled>Reset
                                    Form</button>
                                <button type="submit" class="btn btn-primary disabled" disabled>Create Test
                                    cards</button>
                                <button type="button" class="btn btn-success disabled create-test-card-btn"
                                    id="create-test-card-btn" disabled>
                                    <i class="fas fa-plus-circle"></i> Create Test Card Only
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Quick Create Section -->
                    <div class="quick-create-section">
                        <h3><i class="fas fa-bolt"></i> Quick Create Test Card</h3>
                        <p>Quickly create a test card without filling the full form:</p>

                        <div class="quick-create-form">
                            <div class="quick-create-input">
                                <label for="quick-test-name">Test Name</label>
                                <input type="text" id="quick-test-name" placeholder="Enter test name" disabled>
                            </div>

                            <div class="quick-create-input">
                                <label for="quick-subject">Subject</label>
                                <input type="text" id="quick-subject" placeholder="Enter any subject" disabled>
                            </div>

                            <div class="quick-create-input">
                                <label>Card Color</label>
                                <div class="color-options" id="color-options">
                                    <div class="color-option selected" style="background-color: #e34f26;"
                                        data-color="#e34f26"></div>
                                    <div class="color-option" style="background-color: #1572b6;" data-color="#1572b6">
                                    </div>
                                    <div class="color-option" style="background-color: #f7df1e;" data-color="#f7df1e">
                                    </div>
                                    <div class="color-option" style="background-color: #339933;" data-color="#339933">
                                    </div>
                                    <div class="color-option" style="background-color: #9b59b6;" data-color="#9b59b6">
                                    </div>
                                    <div class="color-option" style="background-color: #e74c3c;" data-color="#e74c3c">
                                    </div>
                                    <div class="color-option" style="background-color: #1abc9c;" data-color="#1abc9c">
                                    </div>
                                </div>
                            </div>

                            <button type="button" class="quick-create-btn disabled" id="quick-create-btn" disabled>
                                <i class="fas fa-plus"></i> Quick Create
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Test Services Section -->
                <div id="test-services-section" class="hidden">
                    <div class="lock-overlay" id="test-services-lock">
                        <div class="lock-message">
                            <div class="lock-icon-large">
                                <i class="fas fa-lock"></i>
                            </div>
                            <h3>Test Services Locked</h3>
                            <p>This feature is only available after payment.</p>
                            <p>Please complete the payment to access Test Services.</p>
                            <button class="btn btn-primary" style="margin-top: 20px;"
                                id="goto-payment-from-test-services">
                                <i class="fas fa-credit-card"></i> Go to Payment
                            </button>
                        </div>
                    </div>

                    <!-- Main Test Services Dashboard -->
                    <div id="test-services-main-dashboard">
                        <div class="services-header">
                            <div class="page-title">
                                <i class="fas fa-clipboard-list"></i>
                                <h2>Explore Test Services</h2>
                            </div>
                            <div class="user-info">
                                <div style="font-size: 1.1rem;">
                                    Total Courses: <strong id="total-courses-count">8</strong>
                                </div>
                            </div>
                        </div>

                        <div class="page-title">
                            <h2>Programming Courses Test Services</h2>
                            <p>Click on "More Details" to view all test services for each course</p>
                        </div>

                        <div class="cards-container" id="courses-container">
                            <!-- Courses will be dynamically added here -->
                        </div>

                        <footer>
                            <p>&copy; 2023 Programming Courses Dashboard. All rights reserved.</p>
                            <p>Total Courses Available: <span id="footer-courses-count">8</span> | Last Updated: Today
                            </p>
                        </footer>
                    </div>

                    <!-- Test Services Page -->
                    <div class="service-page" id="test-services-page">
                        <div class="services-header">
                            <div class="page-title">
                                <i class="fas fa-laptop-code"></i>
                                <h2 id="service-page-title">Test Services</h2>
                            </div>
                            <button class="back-btn" id="back-to-dashboard">
                                <i class="fas fa-arrow-left"></i> Back to Courses
                            </button>
                        </div>

                        <div class="service-header" id="service-header">
                            <div class="service-icon" id="service-icon">
                                <i class="fab fa-html5"></i>
                            </div>
                            <h1 class="service-title" id="service-title">HTML Test Services</h1>
                            <p class="service-description" id="service-description">
                                Explore all test services available for HTML. From beginner to advanced level tests.
                            </p>
                        </div>

                        <div class="test-services-container" id="test-services-container">
                            <!-- Test services will be dynamically added here -->
                        </div>

                        <footer>
                            <p>&copy; 2023 Programming Courses Dashboard. All rights reserved.</p>
                            <p id="service-footer-text">Test Services for HTML</p>
                        </footer>
                    </div>
                </div>

                <!-- Templates Section -->
                <div id="templates-section" class="hidden">
                    <div class="lock-overlay" id="templates-lock">
                        <div class="lock-message">
                            <div class="lock-icon-large">
                                <i class="fas fa-lock"></i>
                            </div>
                            <h3>Templates Locked</h3>
                            <p>This feature is only available after payment.</p>
                            <p>Please complete the payment to access all templates.</p>
                            <button class="btn btn-primary" style="margin-top: 20px;" id="goto-payment-from-templates">
                                <i class="fas fa-credit-card"></i> Go to Payment
                            </button>
                        </div>
                    </div>

                    <div class="page-title">
                        <i class="fas fa-layer-group"></i>
                        <h2>Subject Templates</h2>
                    </div>

                    <div class="card">
                        <h3><i class="fas fa-clipboard-list"></i> All Subject Templates</h3>
                        <p>Click on any template to view all tests created from that template.</p>

                        <div class="service-stats">
                            <div class="stat-card">
                                <div class="stat-number" id="template-test-count">0</div>
                                <div>Total Tests Created</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="template-question-count">0</div>
                                <div>Total Questions Created</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="template-subject-count">0</div>
                                <div>Subjects with Templates</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Python Test Service Section -->
                <div id="python-service-section" class="hidden">
                    <div class="lock-overlay" id="python-service-lock">
                        <div class="lock-message">
                            <div class="lock-icon-large">
                                <i class="fas fa-lock"></i>
                            </div>
                            <h3>Python Service Locked</h3>
                            <p>This feature is only available after payment.</p>
                            <p>Please complete the payment to access Python Test Service.</p>
                            <button class="btn btn-primary" style="margin-top: 20px;" id="goto-payment-from-python">
                                <i class="fas fa-credit-card"></i> Go to Payment
                            </button>
                        </div>
                    </div>

                    <div class="page-title">
                        <i class="fab fa-python"></i>
                        <h2>Python Test Service</h2>
                    </div>

                    <div class="card">
                        <h3><i class="fas fa-folder"></i> All Python Tests</h3>
                        <p>This section displays all Python tests you have created.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // State management
        const state = {
            paymentCompleted: false,
            tests: [],
            templates: [],
            questions: [],
            currentSection: ' payment-section', selectedColor: "#e34f26"
        }; // Course Data const coursesData=[ { id: 1,
        title: "HTML", subtitle: "HyperText Markup Language", icon: "fab fa-html5", color: "#e34f26"
            , viewers: 61, level: "Basics to Advanced", levelClass: "level-advanced",
                description: "Learn HTML from scratch to advanced level" }, {
                    id: 2, title: "CSS",
                        subtitle: "Cascading Style Sheets", icon: "fab fa-css3-alt", color: "#1572b6", viewers: 6,
                            level: "Basics to Advanced", levelClass: "level-advanced",
                                description: "Master CSS for beautiful web designs"
        }, {
            id: 3, title: "JS",
                subtitle: "JavaScript", icon: "fab fa-js", color: "#f7df1e", viewers: 4,
                    level: "Basics to Advanced", levelClass: "level-advanced",
                        description: "Become a JavaScript pro with hands-on projects"
        }, {
            id: 4, title: "NODE.JS",
                subtitle: "JavaScript Runtime", icon: "fab fa-node-js", color: "#339933", viewers: 19,
                    level: "Beginner Basic", levelClass: "level-beginner",
                        description: "Learn backend development with Node.js"
        }, {
            id: 5, title: "PYTHON",
                subtitle: "Programming Language", icon: "fab fa-python", color: "#3776ab", viewers: 42,
                    level: "Beginner Basic", levelClass: "level-beginner",
                        description: "Start your programming journey with Python"
        }, {
            id: 6, title: "PHP",
                subtitle: "Hypertext Preprocessor", icon: "fab fa-php", color: "#777bb4", viewers: 28,
                    level: "Beginner Basic", levelClass: "level-beginner",
                        description: "Server-side scripting for web development"
        }, {
            id: 7, title: "MYSQL",
                subtitle: "Database Management", icon: "fas fa-database", color: "#4479a1", viewers: 35,
                    level: "Beginner Basic", levelClass: "level-beginner",
                        description: "Master database management with MySQL"
        }, {
            id: 8, title: "MONGODB",
                subtitle: "NoSQL Database", icon: "fas fa-server", color: "#47a248", viewers: 22,
                    level: "Beginner Basic", levelClass: "level-beginner",
                        description: "Learn modern database solutions with MongoDB"
        } ]; // Test Services Data for each
                        course const testServicesData = {
            "HTML": [{
                id: "html-1", name: "HTML Basics Test",
                type: "Fundamentals", icon: "fas fa-code", level: "Beginner", levelClass: "level-beginner",
                description: "Test your knowledge of basic HTML tags, elements, and structure.", questions: 20,
                duration: "30 min", students: 1500, color: "#e34f26"
            }, {
                id: "html-2", name: "HTML5 Advanced"
                , type: "Advanced Concepts", icon: "fas fa-laptop-code", level: "Advanced",
                levelClass: "level-advanced",
                description: "Advanced HTML5 features including semantic elements, forms, and APIs.",
                questions: 35, duration: "45 min", students: 850, color: "#e34f26"
            }, {
                id: "html-3",
                name: "HTML Forms Mastery", type: "Forms & Validation", icon: "fas fa-edit",
                level: "Intermediate", levelClass: "level-intermediate",
                description: "Comprehensive test on HTML form elements, attributes, and validation.",
                questions: 25, duration: "35 min", students: 1200, color: "#e34f26"
            }, {
                id: "html-4",
                name: "HTML Multimedia", type: "Media Elements", icon: "fas fa-photo-video",
                level: "Intermediate", levelClass: "level-intermediate",
                description: "Test on audio, video, canvas, and other multimedia elements in HTML.", questions:
                    18, duration: "25 min", students: 950, color: "#e34f26"
            }], "CSS": [{
                id: "css-1",
                name: "CSS Fundamentals", type: "Basics", icon: "fas fa-paint-brush", level: "Beginner",
                levelClass: "level-beginner",
                description: "Test your understanding of CSS selectors, properties, and basic styling.",
                questions: 25, duration: "35 min", students: 1800, color: "#1572b6"
            }, {
                id: "css-2",
                name: "CSS Flexbox & Grid", type: "Layout Systems", icon: "fas fa-th", level: "Intermediate"
                , levelClass: "level-intermediate",
                description: "Modern CSS layout techniques including Flexbox and Grid systems.", questions: 30,
                duration: "40 min", students: 1400, color: "#1572b6"
            }, {
                id: "css-3", name: "CSS Animations"
                , type: "Transitions & Animations", icon: "fas fa-film", level: "Advanced",
                levelClass: "level-advanced",
                description: "Advanced CSS animations, transitions, and keyframe animations.", questions: 22,
                duration: "30 min", students: 1100, color: "#1572b6"
            }], "JS": [{
                id: "js-1",
                name: "JavaScript Basics", type: "Fundamentals", icon: "fab fa-js", level: "Beginner",
                levelClass: "level-beginner",
                description: "Variables, data types, operators, and basic JavaScript concepts.", questions: 30,
                duration: "45 min", students: 2500, color: "#f7df1e"
            }, {
                id: "js-2",
                name: "JavaScript Functions", type: "Functions & Scope", icon: "fas fa-cogs",
                level: "Intermediate", levelClass: "level-intermediate",
                description: "Deep dive into JavaScript functions, closures, and scope chain.", questions: 28,
                duration: "40 min", students: 1900, color: "#f7df1e"
            }, {
                id: "js-3", name: "DOM Manipulation"
                , type: "Document Object Model", icon: "fas fa-sitemap", level: "Intermediate",
                levelClass: "level-intermediate",
                description: "Test your skills in manipulating HTML elements using JavaScript.", questions: 25,
                duration: "35 min", students: 1600, color: "#f7df1e"
            }, {
                id: "js-4", name: "ES6+ Features",
                type: "Modern JavaScript", icon: "fas fa-bolt", level: "Advanced",
                levelClass: "level-advanced",
                description: "Arrow functions, destructuring, promises, async/await and more.", questions: 35,
                duration: "50 min", students: 1300, color: "#f7df1e"
            }], "NODE.JS": [{
                id: "node-1",
                name: "Node.js Basics", type: "Fundamentals", icon: "fab fa-node-js", level: "Beginner",
                levelClass: "level-beginner",
                description: "Introduction to Node.js, modules, and basic server creation.", questions: 20,
                duration: "30 min", students: 1200, color: "#339933"
            }, {
                id: "node-2",
                name: "Express.js Framework", type: "Web Framework", icon: "fas fa-route",
                level: "Intermediate", levelClass: "level-intermediate",
                description: "Building web applications and REST APIs with Express.js.", questions: 25,
                duration: "40 min", students: 900, color: "#339933"
            }], "PYTHON": [{
                id: "python-1",
                name: "Python Fundamentals", type: "Basics", icon: "fab fa-python", level: "Beginner",
                levelClass: "level-beginner",
                description: "Basic Python syntax, data types, and control structures.", questions: 30,
                duration: "45 min", students: 3200, color: "#3776ab"
            }, {
                id: "python-2", name: "Python OOP",
                type: "Object-Oriented", icon: "fas fa-cube", level: "Intermediate",
                levelClass: "level-intermediate",
                description: "Classes, objects, inheritance, polymorphism in Python.", questions: 28,
                duration: "40 min", students: 2100, color: "#3776ab"
            }, {
                id: "python-3",
                name: "Python Data Structures", type: "Advanced Concepts", icon: "fas fa-project-diagram",
                level: "Advanced", levelClass: "level-advanced",
                description: "Lists, tuples, dictionaries, sets, and algorithmic problems.", questions: 35,
                duration: "55 min", students: 1800, color: "#3776ab"
            }], "PHP": [{
                id: "php-1",
                name: "PHP Basics", type: "Fundamentals", icon: "fab fa-php", level: "Beginner",
                levelClass: "level-beginner",
                description: "PHP syntax, variables, operators, and basic programming concepts.", questions:
                    25, duration: "35 min", students: 1400, color: "#777bb4"
            }, {
                id: "php-2",
                name: "PHP with MySQL", type: "Database Integration", icon: "fas fa-database",
                level: "Intermediate", levelClass: "level-intermediate",
                description: "Connecting PHP with MySQL database for dynamic web applications.", questions: 30,
                duration: "45 min", students: 1100, color: "#777bb4"
            }], "MYSQL": [{
                id: "mysql-1",
                name: "SQL Queries", type: "Basic Queries", icon: "fas fa-search", level: "Beginner",
                levelClass: "level-beginner",
                description: "Basic SELECT, INSERT, UPDATE, DELETE queries in MySQL.", questions: 20,
                duration: "30 min", students: 1800, color: "#4479a1"
            }, {
                id: "mysql-2", name: "Advanced SQL"
                , type: "Complex Queries", icon: "fas fa-chart-line", level: "Advanced",
                levelClass: "level-advanced",
                description: "JOINs, subqueries, indexes, and database optimization techniques.", questions:
                    35, duration: "50 min", students: 1200, color: "#4479a1"
            }], "MONGODB": [{
                id: "mongo-1",
                name: "MongoDB Basics", type: "NoSQL Fundamentals", icon: "fas fa-server", level: "Beginner"
                , levelClass: "level-beginner",
                description: "Introduction to MongoDB, documents, collections, and basic CRUD.", questions: 22,
                duration: "30 min", students: 950, color: "#47a248"
            }, {
                id: "mongo-2",
                name: "MongoDB Aggregation", type: "Data Processing", icon: "fas fa-filter",
                level: "Advanced", levelClass: "level-advanced",
                description: "Aggregation pipeline, data transformation, and complex queries.", questions: 28,
                duration: "45 min", students: 650, color: "#47a248"
            }]
        }; // DOM Elements const
        paymentSection = document.getElementById('payment-section'); const
            dashboardSection = document.getElementById('dashboard-section'); const
                createTestSection = document.getElementById('create-test-section'); const
                    testServicesSection = document.getElementById('test-services-section'); const
                        templatesSection = document.getElementById('templates-section'); const
                            pythonServiceSection = document.getElementById('python-service-section'); const
                                navPayment = document.getElementById('nav-payment'); const
                                    navDashboard = document.getElementById('nav-dashboard'); const
                                        navTests = document.getElementById('nav-tests'); const
                                            navTestServices = document.getElementById('nav-test-services'); const
                                                navTemplates = document.getElementById('nav-templates'); const
                                                    navPython = document.getElementById('nav-python'); const
                                                        makePaymentBtn = document.getElementById('make-payment'); const
                                                            testForm = document.getElementById('test-creation-form'); const
                                                                accountStatus = document.getElementById('account-status'); const
                                                                    currentStatus = document.getElementById('current-status'); // Test Services Elements const
        coursesContainer = document.getElementById('courses-container'); const
            testServicesMainDashboard = document.getElementById('test-services-main-dashboard'); const
                testServicesPage = document.getElementById('test-services-page'); const
                    testServicesContainer = document.getElementById('test-services-container'); const
                        backToDashboardBtn = document.getElementById('back-to-dashboard'); const
                            serviceTitle = document.getElementById('service-title'); const
                                serviceDescription = document.getElementById('service-description'); const
                                    serviceIcon = document.getElementById('service-icon'); const
                                        serviceHeader = document.getElementById('service-header'); const
                                            servicePageTitle = document.getElementById('service-page-title'); const
                                                serviceFooterText = document.getElementById('service-footer-text'); // Lock overlays const
        dashboardLock = document.getElementById('dashboard-lock'); const
            createTestLock = document.getElementById('create-test-lock'); const
                testServicesLock = document.getElementById('test-services-lock'); const
                    templatesLock = document.getElementById('templates-lock'); const
                        pythonServiceLock = document.getElementById('python-service-lock'); // Go to payment buttons const
        gotoPaymentFromDashboard = document.getElementById('goto-payment-from-dashboard'); const
            gotoPaymentFromTests = document.getElementById('goto-payment-from-tests'); const
                gotoPaymentFromTestServices = document.getElementById('goto-payment-from-test-services'); const
                    gotoPaymentFromTemplates = document.getElementById('goto-payment-from-templates'); const
                        gotoPaymentFromPython = document.getElementById('goto-payment-from-python'); // Statistics
                        elements const totalTestsElement = document.getElementById('total-tests'); const
            totalQuestionsElement = document.getElementById('total-questions'); const
                activeTemplatesElement = document.getElementById('active-templates'); const
                    templateTestCountElement = document.getElementById('template-test-count'); const
                        templateQuestionCountElement = document.getElementById('template-question-count'); const
                            templateSubjectCountElement = document.getElementById('template-subject-count'); // New elements
        for Create Test Card feature const
            createTestCardBtn = document.getElementById('create-test-card-btn'); const
                totalCoursesCountElement = document.getElementById('total-courses-count'); const
                    footerCoursesCountElement = document.getElementById('footer-courses-count'); // Quick create
                        elements const quickTestNameInput = document.getElementById('quick-test-name'); const
            quickSubjectInput = document.getElementById('quick-subject'); const
                quickCreateBtn = document.getElementById('quick-create-btn'); const
                    colorOptions = document.getElementById('color-options'); // Initialize the app function initApp()
        { // Check if payment was previously completed const
            savedPayment = localStorage.getItem('teacherPaymentCompleted'); if (savedPayment === 'true') {
                state.paymentCompleted = true; unlockAllFeatures(); showDashboard();
            } else { // Lock all features
                        except payment lockAllFeatures(); showPaymentSection();
            } // Load saved tests const
            savedTests = localStorage.getItem('teacherTests'); if (savedTests) {
                state.tests = JSON.parse(savedTests);
            } // Load saved templates const
            savedTemplates = localStorage.getItem('teacherTemplates'); if (savedTemplates) {
                state.templates = JSON.parse(savedTemplates);
            } // Load saved questions const
            savedQuestions = localStorage.getItem('teacherQuestions'); if (savedQuestions) {
                state.questions = JSON.parse(savedQuestions);
            } // Load custom test cards const
            savedCustomCards = localStorage.getItem('customTestCards'); if (savedCustomCards) {
                const
                customCards = JSON.parse(savedCustomCards); customCards.forEach(card => {
                    // Add to coursesData
                    coursesData.push(card);

                    // Add to testServicesData
                    if (!testServicesData[card.title]) {
                        testServicesData[card.title] = [];
                    }

                    // Create a test service for this card
                    const testService = {
                        id: `${card.title.toLowerCase().replace(/\s+/g, '-')}-${Date.now()}`,
                        name: card.subtitle,
                        type: card.level,
                        icon: card.icon,
                        level: card.level,
                        levelClass: card.levelClass,
                        description: card.description,
                        questions: Math.floor(Math.random() * 30) + 10,
                        duration: `${Math.floor(Math.random() * 60) + 15} min`,
                        students: Math.floor(Math.random() * 1000) + 100,
                        color: card.color
                    };

                    testServicesData[card.title].push(testService);
                });
            }

            // Initialize test services
            renderCourses();

            // Set up event listeners
            setupEventListeners();
        }

        // Lock all features (payment not completed)
        function lockAllFeatures() {
            // Update UI to show locked state
            accountStatus.textContent = "Free Account";
            currentStatus.textContent = "Free Account (Limited Features)";
            currentStatus.style.color = "#e74c3c";

            // Show lock overlays
            if (dashboardLock) dashboardLock.style.display = 'flex';
            if (createTestLock) createTestLock.style.display = 'flex';
            if (testServicesLock) testServicesLock.style.display = 'flex';
            if (templatesLock) templatesLock.style.display = 'flex';
            if (pythonServiceLock) pythonServiceLock.style.display = 'flex';

            // Disable all form elements
            disableFormElements();

            // Update navigation items to show locked state
            document.querySelectorAll('.nav-item:not(#nav-payment)').forEach(item => {
                item.classList.add('locked');
                const lockIcon = item.querySelector('.lock-icon');
                if (lockIcon) lockIcon.style.display = 'block';
            });

            // Enable only payment navigation
            navPayment.classList.remove('locked');
            navPayment.classList.add('active');
        }

        // Unlock all features (payment completed)
        function unlockAllFeatures() {
            // Update UI to show unlocked state
            accountStatus.textContent = "Premium Account";
            accountStatus.style.color = "#27ae60";
            currentStatus.textContent = "Premium Account (All Features Unlocked)";
            currentStatus.style.color = "#27ae60";

            // Hide lock overlays
            if (dashboardLock) dashboardLock.style.display = 'none';
            if (createTestLock) createTestLock.style.display = 'none';
            if (testServicesLock) testServicesLock.style.display = 'none';
            if (templatesLock) templatesLock.style.display = 'none';
            if (pythonServiceLock) pythonServiceLock.style.display = 'none';

            // Enable all form elements
            enableFormElements();

            // Update navigation items to show unlocked state
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('locked');
                const lockIcon = item.querySelector('.lock-icon');
                if (lockIcon) lockIcon.style.display = 'none';
            });

            // Show success notification
            showNotification('All features unlocked successfully!', 'success');
        }

        // Disable all form elements
        function disableFormElements() {
            // Disable test form inputs
            document.querySelectorAll('#test-creation-form input, #test-creation-form select,
                        #test - creation - form textarea').forEach(el => {
                        el.disabled = true;
        });

        // Disable quick create inputs
        quickTestNameInput.disabled = true;
        quickSubjectInput.disabled = true;
        quickCreateBtn.disabled = true;
        quickCreateBtn.classList.add('disabled');

        // Disable buttons
        document.querySelectorAll('#test-creation-form button, #refresh-tests,
                        #view - all - tests').forEach(btn => {
                        btn.disabled = true;
        btn.classList.add('disabled');
                        });
                        }

        // Enable all form elements
        function enableFormElements() {
            // Enable test form inputs
            document.querySelectorAll('#test-creation-form input, #test-creation-form select,
                        #test - creation - form textarea').forEach(el => {
                        el.disabled = false;
        });

        // Enable quick create inputs
        quickTestNameInput.disabled = false;
        quickSubjectInput.disabled = false;
        quickCreateBtn.disabled = false;
        quickCreateBtn.classList.remove('disabled');

        // Enable buttons
        document.querySelectorAll('#test-creation-form button, #refresh-tests,
                        #view - all - tests').forEach(btn => {
                        btn.disabled = false;
        btn.classList.remove('disabled');
                        });
                        }

        // Set up all event listeners
        function setupEventListeners() {
            // Navigation - with payment check
            navPayment.addEventListener('click', () => showPaymentSection());

            navDashboard.addEventListener('click', () => {
                if (state.paymentCompleted) {
                    showDashboard();
                } else {
                    alert('Please complete payment first to access the dashboard.');
                    showPaymentSection();
                }
            });

            navTests.addEventListener('click', () => {
                if (state.paymentCompleted) {
                    showCreateTestSection();
                } else {
                    alert('Please complete payment first to create tests.');
                    showPaymentSection();
                }
            });

            navTestServices.addEventListener('click', () => {
                if (state.paymentCompleted) {
                    showTestServicesSection();
                } else {
                    alert('Please complete payment first to access Test Services.');
                    showPaymentSection();
                }
            });

            navTemplates.addEventListener('click', () => {
                if (state.paymentCompleted) {
                    showTemplatesSection();
                } else {
                    alert('Please complete payment first to access templates.');
                    showPaymentSection();
                }
            });

            navPython.addEventListener('click', () => {
                if (state.paymentCompleted) {
                    showPythonServiceSection();
                } else {
                    alert('Please complete payment first to access Python Test Service.');
                    showPaymentSection();
                }
            });

            // Payment
            makePaymentBtn.addEventListener('click', processPayment);

            // Go to payment buttons
            gotoPaymentFromDashboard.addEventListener('click', () => showPaymentSection());
            gotoPaymentFromTests.addEventListener('click', () => showPaymentSection());
            gotoPaymentFromTestServices.addEventListener('click', () => showPaymentSection());
            gotoPaymentFromTemplates.addEventListener('click', () => showPaymentSection());
            gotoPaymentFromPython.addEventListener('click', () => showPaymentSection());

            // Test form - only if payment completed
            testForm.addEventListener('submit', function (e) {
                e.preventDefault();
                if (state.paymentCompleted) {
                    createTest(e);
                } else {
                    alert('Please complete payment first to create tests.');
                    showPaymentSection();
                }
            });

            document.getElementById('reset-form').addEventListener('click', function () {
                if (state.paymentCompleted) {
                    resetTestForm();
                } else {
                    alert('Please complete payment first to use this feature.');
                }
            });

            // Create Test Card button
            createTestCardBtn.addEventListener('click', function () {
                if (state.paymentCompleted) {
                    createTestCardFromForm();
                } else {
                    alert('Please complete payment first to create test cards.');
                    showPaymentSection();
                }
            });

            // Quick Create button
            quickCreateBtn.addEventListener('click', function () {
                if (state.paymentCompleted) {
                    createQuickTestCard();
                } else {
                    alert('Please complete payment first to create test cards.');
                    showPaymentSection();
                }
            });

            // Color selection
            colorOptions.addEventListener('click', function (e) {
                if (e.target.classList.contains('color-option')) {
                    // Remove selected class from all color options
                    document.querySelectorAll('.color-option').forEach(option => {
                        option.classList.remove('selected');
                    });

                    // Add selected class to clicked option
                    e.target.classList.add('selected');

                    // Update selected color
                    state.selectedColor = e.target.getAttribute('data-color');
                }
            });

            // Test Services back button
            backToDashboardBtn.addEventListener('click', function () {
                testServicesMainDashboard.style.display = 'block';
                testServicesPage.style.display = 'none';
            });

            // Test Services details buttons (event delegation)
            document.addEventListener('click', function (e) {
                if (e.target.classList.contains('details-btn') || e.target.closest('.details-btn')) {
                    if (!state.paymentCompleted) {
                        alert('Please complete payment first to access Test Services.');
                        showPaymentSection();
                        return;
                    }

                    const button = e.target.classList.contains('details-btn') ? e.target :
                        e.target.closest('.details-btn');
                    const courseName = button.getAttribute('data-course');
                    showTestServicesPage(courseName);
                }

                // Enroll buttons
                if (e.target.classList.contains('enroll-btn') || e.target.closest('.enroll-btn')) {
                    const button = e.target.classList.contains('enroll-btn') ? e.target :
                        e.target.closest('.enroll-btn');
                    const card = button.closest('.test-service-card');
                    const testName = card.querySelector('.test-service-name').textContent;
                    alert(`Starting test: ${testName}\n\nGood luck! The test will begin shortly.`);
                }
            });
        }

        // Show notification
        function showNotification(message, type = 'info') {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                        <div
                            style="position: fixed; top: 20px; right: 20px; background-color: ${type === 'success' ? '#27ae60' : '#3498db'}; color: white; padding: 15px 20px; border-radius: 5px; box-shadow: 0 3px 10px rgba(0,0,0,0.2); z-index: 1000; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-${type === 'success' ? 'check-circle' : 'info-circle'}"></i>
                            <span>${message}</span>
                        </div>
                        `;

            document.body.appendChild(notification);

            // Remove notification after 3 seconds
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Show payment section
        function showPaymentSection() {
            hideAllSections();
            paymentSection.classList.remove('hidden');
            updateActiveNav('nav-payment');
            state.currentSection = 'payment-section';
        }

        // Show dashboard section
        function showDashboard() {
            hideAllSections();
            dashboardSection.classList.remove('hidden');
            updateActiveNav('nav-dashboard');
            state.currentSection = 'dashboard-section';
            updateDashboard();
        }

        // Show create test section
        function showCreateTestSection() {
            hideAllSections();
            createTestSection.classList.remove('hidden');
            updateActiveNav('nav-tests');
            state.currentSection = 'create-test-section';
        }

        // Show test services section
        function showTestServicesSection() {
            hideAllSections();
            testServicesSection.classList.remove('hidden');
            updateActiveNav('nav-test-services');
            state.currentSection = 'test-services-section';

            // Ensure test services dashboard is visible
            testServicesMainDashboard.style.display = 'block';
            testServicesPage.style.display = 'none';
        }

        // Show templates section
        function showTemplatesSection() {
            hideAllSections();
            templatesSection.classList.remove('hidden');
            updateActiveNav('nav-templates');
            state.currentSection = 'templates-section';
        }

        // Show Python service section
        function showPythonServiceSection() {
            hideAllSections();
            pythonServiceSection.classList.remove('hidden');
            updateActiveNav('nav-python');
            state.currentSection = 'python-service-section';
        }

        // Hide all sections
        function hideAllSections() {
            paymentSection.classList.add('hidden');
            dashboardSection.classList.add('hidden');
            createTestSection.classList.add('hidden');
            testServicesSection.classList.add('hidden');
            templatesSection.classList.add('hidden');
            pythonServiceSection.classList.add('hidden');
        }

        // Update active navigation item
        function updateActiveNav(activeId) {
            // Remove active class from all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });

            // Add active class to current nav item
            document.getElementById(activeId).classList.add('active');
        }

        // Process payment
        function processPayment() {
            // Simulate payment processing
            makePaymentBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing Payment...';
            makePaymentBtn.disabled = true;

            setTimeout(() => {
                // Payment successful
                state.paymentCompleted = true;
                localStorage.setItem('teacherPaymentCompleted', 'true');

                makePaymentBtn.innerHTML = '<i class="fas fa-check"></i> Payment Successful!';
                makePaymentBtn.style.background = 'linear-gradient(90deg, #27ae60, #2ecc71)';

                // Unlock all features
                unlockAllFeatures();

                // Show success message
                setTimeout(() => {
                    showDashboard();
                }, 1000);
            }, 2000);
        }

        // Create a new test
        function createTest(e) {
            e.preventDefault();

            if (!state.paymentCompleted) {
                alert('Please complete payment first to create tests.');
                showPaymentSection();
                return;
            }

            // Get form values
            const testName = document.getElementById('test-name').value;
            const testSubject = document.getElementById('test-subject').value;
            const testDuration = document.getElementById('test-duration').value;
            const testDifficulty = document.getElementById('test-difficulty').value;
            const testDescription = document.getElementById('test-description').value;

            if (!testSubject) {
                alert('Please enter a subject.');
                return;
            }

            // Create test object
            const newTest = {
                id: Date.now(),
                name: testName,
                subject: testSubject,
                duration: testDuration,
                difficulty: testDifficulty,
                description: testDescription,
                questions: [],
                date: new Date().toLocaleDateString(),
                time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }),
                status: 'completed'
            };

            // Add to tests array
            state.tests.unshift(newTest);

            // Save to localStorage
            localStorage.setItem('teacherTests', JSON.stringify(state.tests));

            // Reset form
            resetTestForm();

            // Update dashboard
            updateDashboard();

            // Show success message
            showNotification(`Test "${testName}" created successfully!`, 'success');
        }

        // Create a test card from form data
        function createTestCardFromForm() {
            const testName = document.getElementById('test-name').value;
            const testSubject = document.getElementById('test-subject').value;
            const testDuration = document.getElementById('test-duration').value;
            const testDifficulty = document.getElementById('test-difficulty').value;
            const testDescription = document.getElementById('test-description').value;

            if (!testName || !testSubject) {
                alert('Please fill in test name and subject.');
                return;
            }

            //  Check if subject card already exists
            let existingCourse = findCourseBySubject(testSubject);

            // Test service object
            const testService = {
                id: `${testSubject}-${Date.now()}`,
                name: testName,
                type: testDifficulty,
                icon: getIconForSubject(testSubject),
                level: testDifficulty,
                levelClass: getLevelClass(testDifficulty),
                description: testDescription || `Test for ${testSubject}`,
                questions: Math.floor(Math.random() * 30) + 10,
                duration: `${testDuration} min`,
                students: Math.floor(Math.random() * 1000) + 100,
                color: getRandomColor()
            };

            //  If subject exists  only add test
            if (existingCourse) {
                if (!testServicesData[existingCourse.title]) {
                    testServicesData[existingCourse.title] = [];
                }
                testServicesData[existingCourse.title].push(testService);

                showNotification(`Test added to existing subject "${existingCourse.title}"`, 'success');
            }
            //  If subject not exists  create new card
            else {
                const newCourseCard = {
                    id: Date.now(),
                    title: testSubject,
                    subtitle: testName,
                    icon: getIconForSubject(testSubject),
                    color: getRandomColor(),
                    viewers: Math.floor(Math.random() * 100) + 1,
                    level: testDifficulty,
                    levelClass: getLevelClass(testDifficulty),
                    description: testDescription || `Test for ${testSubject}`
                };

                coursesData.push(newCourseCard);

                testServicesData[testSubject] = [testService];

                saveCustomCard(newCourseCard);

                showNotification(`New subject "${testSubject}" created with test`, 'success');
            }

            renderCourses();
            updateCourseCount();
            resetTestForm();

            setTimeout(() => {
                showTestServicesSection();
            }, 1000);
        }

        // Create quick test card
        function createQuickTestCard() {
            const testName = quickTestNameInput.value;
            const subject = quickSubjectInput.value;

            if (!testName || !subject) {
                alert('Please fill in test name and subject.');
                return;
            }

            let existingCourse = findCourseBySubject(subject);

            const testService = {
                id: `${subject}-${Date.now()}`,
                name: testName,
                type: "Intermediate",
                icon: getIconForSubject(subject),
                level: "Intermediate",
                levelClass: "level-intermediate",
                description: `Quick test for ${subject}`,
                questions: Math.floor(Math.random() * 30) + 10,
                duration: "30 min",
                students: Math.floor(Math.random() * 1000) + 100,
                color: state.selectedColor
            };

            // If subject exists
            if (existingCourse) {
                if (!testServicesData[existingCourse.title]) {
                    testServicesData[existingCourse.title] = [];
                }
                testServicesData[existingCourse.title].push(testService);

                showNotification(`Test added to "${existingCourse.title}"`, 'success');
            }
            // If not exists  create new
            else {
                const newCourseCard = {
                    id: Date.now(),
                    title: subject,
                    subtitle: testName,
                    icon: "fas fa-file-alt",
                    color: state.selectedColor,
                    viewers: Math.floor(Math.random() * 100) + 1,
                    level: "Intermediate",
                    levelClass: "level-intermediate",
                    description: `Quick test for ${subject}`
                };

                coursesData.push(newCourseCard);
                testServicesData[subject] = [testService];
                saveCustomCard(newCourseCard);

                showNotification(`New subject "${subject}" created`, 'success');
            }

            renderCourses();
            updateCourseCount();

            quickTestNameInput.value = '';
            quickSubjectInput.value = '';

            setTimeout(() => {
                showTestServicesSection();
            }, 1000);
        }
        function findCourseBySubject(subject) {
            return coursesData.find(course =>
                course.title.toLowerCase() === subject.toLowerCase()
            );
        }

        // Save custom card to localStorage
        function saveCustomCard(card) {
            // Add to coursesData
            coursesData.push(card);

            // Load existing custom cards
            let customCards = [];
            const savedCustomCards = localStorage.getItem('customTestCards');
            if (savedCustomCards) {
                customCards = JSON.parse(savedCustomCards);
            }

            // Add new card
            customCards.push(card);

            // Save to localStorage
            localStorage.setItem('customTestCards', JSON.stringify(customCards));

            // Also create a test service for this card
            const testService = {
                id: `${card.title.toLowerCase().replace(/\s+/g, '-')}-${card.id}`,
                name: card.subtitle,
                type: card.level,
                icon: card.icon,
                level: card.level,
                levelClass: card.levelClass,
                description: card.description,
                questions: Math.floor(Math.random() * 30) + 10,
                duration: `${Math.floor(Math.random() * 60) + 15} min`,
                students: Math.floor(Math.random() * 1000) + 100,
                color: card.color
            };

            // Initialize test services for this subject if not exists
            if (!testServicesData[card.title]) {
                testServicesData[card.title] = [];
            }

            // Add test service
            testServicesData[card.title].push(testService);

            // Save test services data
            localStorage.setItem('testServicesData', JSON.stringify(testServicesData));
        }

        // Get random color
        function getRandomColor() {
            const colors = [
                "#e34f26", "#1572b6", "#f7df1e", "#339933",
                "#3776ab", "#777bb4", "#4479a1", "#47a248",
                "#9b59b6", "#e74c3c", "#1abc9c", "#3498db",
                "#f39c12", "#d35400", "#c0392b", "#8e44ad"
            ];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        // Get icon for subject
        function getIconForSubject(subject) {
            // Check if subject matches any predefined ones
            const subjectLower = subject.toLowerCase();
            if (subjectLower.includes('html')) return 'fab fa-html5';
            if (subjectLower.includes('css')) return 'fab fa-css3-alt';
            if (subjectLower.includes('javascript') || subjectLower.includes('js')) return 'fab fa-js';
            if (subjectLower.includes('python')) return 'fab fa-python';
            if (subjectLower.includes('php')) return 'fab fa-php';
            if (subjectLower.includes('mysql')) return 'fas fa-database';
            if (subjectLower.includes('node')) return 'fab fa-node-js';
            if (subjectLower.includes('mongo')) return 'fas fa-server';
            if (subjectLower.includes('math')) return 'fas fa-calculator';
            if (subjectLower.includes('science')) return 'fas fa-flask';
            if (subjectLower.includes('history')) return 'fas fa-landmark';
            if (subjectLower.includes('english')) return 'fas fa-book';
            if (subjectLower.includes('computer')) return 'fas fa-laptop-code';

            // Default icon
            return 'fas fa-file-alt';
        }

        // Get level class for difficulty
        function getLevelClass(difficulty) {
            const levelMap = {
                'Beginner': 'level-beginner',
                'Intermediate': 'level-intermediate',
                'Advanced': 'level-advanced'
            };

            return levelMap[difficulty] || 'level-intermediate';
        }

        // Update course count
        function updateCourseCount() {
            const count = coursesData.length;
            totalCoursesCountElement.textContent = count;
            footerCoursesCountElement.textContent = count;
        }

        // Reset the test form
        function resetTestForm() {
            if (!state.paymentCompleted) {
                alert('Please complete payment first to use this feature.');
                return;
            }

            testForm.reset();
            document.getElementById('test-duration').value = 60;
            document.getElementById('test-difficulty').value = 'Intermediate';
        }

        // Update dashboard
        function updateDashboard() {
            // Update statistics
            totalTestsElement.textContent = state.tests.length;

            const totalQuestions = state.tests.reduce((total, test) => total + test.questions.length, 0);
            totalQuestionsElement.textContent = totalQuestions;

            const activeTemplates = state.templates.filter(t => t.active).length;
            activeTemplatesElement.textContent = activeTemplates;
        }

        // Render all courses
        function renderCourses() {
            coursesContainer.innerHTML = '';

            coursesData.forEach(course => {
                const courseCard = document.createElement('div');
                courseCard.className = 'course-card';
                courseCard.innerHTML = `
                        <div class="course-card-header"
                            style="background: linear-gradient(135deg, ${course.color}, #2c3e50);">
                            <div class="card-icon">
                                <i class="${course.icon}"></i>
                            </div>
                            <h2 class="card-title">${course.title}</h2>
                            <p class="card-subtitle">${course.subtitle}</p>
                        </div>
                        <div class="course-card-body">
                            <div class="viewers-count">
                                <i class="fas fa-eye"></i>
                                <span>Updated Viewers: ${course.viewers}</span>
                            </div>
                            <div class="level-badge ${course.levelClass}">
                                ${course.level}
                            </div>
                            <p style="color: #7f8c8d; text-align: center; line-height: 1.5;">
                                ${course.description}
                            </p>
                        </div>
                        <div class="course-card-footer">
                            <button class="details-btn" data-course="${course.title}">
                                <i class="fas fa-info-circle"></i> More Details
                            </button>
                        </div>
                        `;

                coursesContainer.appendChild(courseCard);
            });

            // Update course count
            updateCourseCount();
        }

        // Render test services for a specific course
        function renderTestServices(courseName) {
            testServicesContainer.innerHTML = '';

            const services = testServicesData[courseName];

            if (!services || services.length === 0) {
                testServicesContainer.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-exclamation-circle"></i>
                            <h3>No Test Services Available</h3>
                            <p>There are currently no test services for ${courseName}.</p>
                            <p>Check back soon for updates!</p>
                        </div>
                        `;
                return;
            }

            services.forEach(service => {
                const serviceCard = document.createElement('div');
                serviceCard.className = 'test-service-card';
                serviceCard.innerHTML = `
                        <div class="test-service-header"
                            style="background: linear-gradient(135deg, ${service.color}, #2980b9);">
                            <div class="test-service-icon">
                                <i class="${service.icon}"></i>
                            </div>
                            <h2 class="test-service-name">${service.name}</h2>
                            <p class="test-service-type">${service.type}</p>
                        </div>
                        <div class="test-service-body">
                            <div class="test-service-level ${service.levelClass}">
                                ${service.level} Level
                            </div>
                            <p class="test-service-description">
                                ${service.description}
                            </p>
                            <div class="test-service-stats">
                                <div class="stat-item">
                                    <div class="stat-value">${service.questions}</div>
                                    <div class="stat-label">Questions</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value">${service.duration}</div>
                                    <div class="stat-label">Duration</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value">${service.students}</div>
                                    <div class="stat-label">Students</div>
                                </div>
                            </div>
                        </div>
                        <div class="test-service-footer">
                            <button class="enroll-btn">
                                <i class="fas fa-play-circle"></i> Start Test
                            </button>
                        </div>
                        `;

                testServicesContainer.appendChild(serviceCard);
            });

            // Update footer text
            serviceFooterText.textContent = `${services.length} Test Services for ${courseName}`;
        }

        // Show test services page for a specific course
        function showTestServicesPage(courseName) {
            // Find course data
            const course = coursesData.find(c => c.title === courseName);

            if (!course) return;

            // Update page content
            serviceTitle.textContent = `${courseName} Test Services`;
            serviceDescription.textContent = `Explore all ${testServicesData[courseName]?.length || 0} test
                        services available for ${courseName}. From beginner to advanced level tests.`;
            serviceIcon.innerHTML = `<i class="${course.icon}"></i>`;
            serviceHeader.style.background = `linear-gradient(135deg, ${course.color}, #8e44ad)`;
            servicePageTitle.textContent = `${courseName} Test Services`;

            // Render test services
            renderTestServices(courseName);

            // Show test services page, hide main dashboard
            testServicesMainDashboard.style.display = 'none';
            testServicesPage.style.display = 'block';
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>

</html>