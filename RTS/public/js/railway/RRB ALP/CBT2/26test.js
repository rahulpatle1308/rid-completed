const questions =[
{
"num": 1,
"question_en": "What is the chemical symbol for Potassium?",
"question_hi": "पोटेशियम का रासायनिक प्रतीक क्या है?",
"options_en": ["P", "Pt", "K", "Po"],
"options_hi": ["P", "Pt", "K", "Po"],
"answer_en": "K",
"answer_hi": "K"
},
{
"num": 2,
"question_en": "Which of the following is NOT an input device?",
"question_hi": "निम्नलिखित में से कौन सा इनपुट डिवाइस नहीं है?",
"options_en": ["Scanner", "Printer", "Keyboard", "Mouse"],
"options_hi": ["स्कैनर", "प्रिंटर", "कीबोर्ड", "माउस"],
"answer_en": "Printer",
"answer_hi": "प्रिंटर"
},
{
"num": 3,
"question_en": "What is the unit of magnetic flux?",
"question_hi": "चुंबकीय फ्लक्स की इकाई क्या है?",
"options_en": ["Tesla", "Weber", "Henry", "Gauss"],
"options_hi": ["टेस्ला", "वेबर", "हेनरी", "गॉस"],
"answer_en": "Weber",
"answer_hi": "वेबर"
},
{
"num": 4,
"question_en": "The first satellite launched by India was:",
"question_hi": "भारत द्वारा प्रक्षेपित पहला उपग्रह था:",
"options_en": ["Bhaskara", "Aryabhata", "Rohini", "INSAT-1A"],
"options_hi": ["भास्कर", "आर्यभट्ट", "रोहिणी", "इन्सैट-1ए"],
"answer_en": "Aryabhata",
"answer_hi": "आर्यभट्ट"
},
{
"num": 5,
"question_en": "Which of these is a symptom of a rich air-fuel mixture in an engine?",
"question_hi": "इनमें से कौन सा इंजन में समृद्ध वायु-ईंधन मिश्रण का लक्षण है?",
"options_en": ["Black smoke", "White smoke", "Blue smoke", "No smoke"],
"options_hi": ["काला धुआं", "सफेद धुआं", "नीला धुआं", "कोई धुआं नहीं"],
"answer_en": "Black smoke",
"answer_hi": "काला धुआं"
},
{
"num": 6,
"question_en": "What does HTTP stand for?",
"question_hi": "HTTP का क्या अर्थ है?",
"options_en": ["HyperText Transfer Protocol", "Hyperlink Text Transfer Process", "High Transfer Text Protocol", "Hyper Transfer Text Protocol"],
"options_hi": ["हाइपरटेक्स्ट ट्रांसफर प्रोटोकॉल", "हाइपरलिंक टेक्स्ट ट्रांसफर प्रोसेस", "हाई ट्रांसफर टेक्स्ट प्रोटोकॉल", "हाइपर ट्रांसफर टेक्स्ट प्रोटोकॉल"],
"answer_en": "HyperText Transfer Protocol",
"answer_hi": "हाइपरटेक्स्ट ट्रांसफर प्रोटोकॉल"
},
{
"num": 7,
"question_en": "The filament of an electric bulb is made of:",
"question_hi": "एक इलेक्ट्रिक बल्ब का फिलामेंट किससे बना होता है?",
"options_en": ["Copper", "Aluminum", "Tungsten", "Iron"],
"options_hi": ["तांबा", "एल्यूमीनियम", "टंगस्टन", "लोहा"],
"answer_en": "Tungsten",
"answer_hi": "टंगस्टन"
},
{
"num": 8,
"question_en": "What is the full form of SIM?",
"question_hi": "SIM का पूर्ण रूप क्या है?",
"options_en": ["Subscriber Identity Module", "System Identity Module", "Subscriber Identification Method", "System Identification Method"],
"options_hi": ["सब्सक्राइबर आइडेंटिटी मॉड्यूल", "सिस्टम आइडेंटिटी मॉड्यूल", "सब्सक्राइबर आइडेंटिफिकेशन मेथड", "सिस्टम आइडेंटिफिकेशन मेथड"],
"answer_en": "Subscriber Identity Module",
"answer_hi": "सब्सक्राइबर आइडेंटिटी मॉड्यूल"
},
{
"num": 9,
"question_en": "Which gas is most abundant in the Earth's atmosphere?",
"question_hi": "पृथ्वी के वातावरण में कौन सी गैस सबसे अधिक प्रचुर है?",
"options_en": ["Oxygen", "Nitrogen", "Carbon Dioxide", "Argon"],
"options_hi": ["ऑक्सीजन", "नाइट्रोजन", "कार्बन डाइऑक्साइड", "आर्गन"],
"answer_en": "Nitrogen",
"answer_hi": "नाइट्रोजन"
},
{
"num": 10,
"question_en": "Which of these is used in making mirrors?",
"question_hi": "इनमें से किसका उपयोग दर्पण बनाने में किया जाता है?",
"options_en": ["Silver", "Aluminum", "Both A and B", "Gold"],
"options_hi": ["चांदी", "एल्यूमीनियम", "A और B दोनों", "सोना"],
"answer_en": "Both A and B",
"answer_hi": "A और B दोनों"
},
{
"num": 11,
"question_en": "What is the unit of electric current?",
"question_hi": "विद्युत धारा की इकाई क्या है?",
"options_en": ["Volt", "Ampere", "Watt", "Ohm"],
"options_hi": ["वोल्ट", "एम्पीयर", "वाट", "ओम"],
"answer_en": "Ampere",
"answer_hi": "एम्पीयर"
},
{
"num": 12,
"question_en": "Which instrument is used to measure atmospheric pressure?",
"question_hi": "वायुमंडलीय दबाव मापने के लिए किस उपकरण का उपयोग किया जाता है?",
"options_en": ["Hygrometer", "Barometer", "Manometer", "Thermometer"],
"options_hi": ["हाइग्रोमीटर", "बैरोमीटर", "मैनोमीटर", "थर्मामीटर"],
"answer_en": "Barometer",
"answer_hi": "बैरोमीटर"
},
{
"num": 13,
"question_en": "Which part of the eye controls the amount of light entering?",
"question_hi": "आंख का कौन सा भाग प्रवेश करने वाले प्रकाश की मात्रा को नियंत्रित करता है?",
"options_en": ["Retina", "Cornea", "Iris", "Lens"],
"options_hi": ["रेटिना", "कॉर्निया", "आइरिस", "लेंस"],
"answer_en": "Iris",
"answer_hi": "आइरिस"
},
{
"num": 14,
"question_en": "What is the full form of PDF?",
"question_hi": "PDF का पूर्ण रूप क्या है?",
"options_en": ["Portable Document Format", "Printed Document Format", "Personal Data Format", "Public Document Format"],
"options_hi": ["पोर्टेबल डॉक्यूमेंट फॉर्मेट", "प्रिंटेड डॉक्यूमेंट फॉर्मेट", "पर्सनल डेटा फॉर्मेट", "पब्लिक डॉक्यूमेंट फॉर्मेट"],
"answer_en": "Portable Document Format",
"answer_hi": "पोर्टेबल डॉक्यूमेंट फॉर्मेट"
},
{
"num": 15,
"question_en": "Which of these is NOT a programming language?",
"question_hi": "निम्नलिखित में से कौन सी प्रोग्रामिंग भाषा नहीं है?",
"options_en": ["Java", "Python", "Excel", "C++"],
"options_hi": ["जावा", "पायथन", "एक्सेल", "C++"],
"answer_en": "Excel",
"answer_hi": "एक्सेल"
},
{
"num": 16,
"question_en": "What is the SI unit of force?",
"question_hi": "बल की SI इकाई क्या है?",
"options_en": ["Joule", "Newton", "Pascal", "Watt"],
"options_hi": ["जूल", "न्यूटन", "पास्कल", "वाट"],
"answer_en": "Newton",
"answer_hi": "न्यूटन"
},
{
"num": 17,
"question_en": "Which metal is used in batteries for its high electrochemical potential?",
"question_hi": "उच्च इलेक्ट्रोकेमिकल क्षमता के लिए बैटरियों में किस धातु का उपयोग किया जाता है?",
"options_en": ["Copper", "Lead", "Lithium", "Zinc"],
"options_hi": ["तांबा", "सीसा", "लिथियम", "जस्ता"],
"answer_en": "Lithium",
"answer_hi": "लिथियम"
},
{
"num": 18,
"question_en": "What is the purpose of an alternator in a vehicle?",
"question_hi": "वाहन में अल्टरनेटर का उद्देश्य क्या है?",
"options_en": ["Start the engine", "Charge the battery", "Control speed", "Cool the engine"],
"options_hi": ["इंजन शुरू करें", "बैटरी चार्ज करें", "गति नियंत्रित करें", "इंजन ठंडा करें"],
"answer_en": "Charge the battery",
"answer_hi": "बैटरी चार्ज करें"
},
{
"num": 19,
"question_en": "What does GPS stand for?",
"question_hi": "GPS का क्या अर्थ है?",
"options_en": ["Global Positioning System", "Geographic Positioning System", "Global Placement System", "Geographic Placement System"],
"options_hi": ["ग्लोबल पोजिशनिंग सिस्टम", "जियोग्राफिक पोजिशनिंग सिस्टम", "ग्लोबल प्लेसमेंट सिस्टम", "जियोग्राफिक प्लेसमेंट सिस्टम"],
"answer_en": "Global Positioning System",
"answer_hi": "ग्लोबल पोजिशनिंग सिस्टम"
},
{
"num": 20,
"question_en": "Which gas is released during photosynthesis?",
"question_hi": "प्रकाश संश्लेषण के दौरान कौन सी गैस निकलती है?",
"options_en": ["Oxygen", "Carbon Dioxide", "Nitrogen", "Hydrogen"],
"options_hi": ["ऑक्सीजन", "कार्बन डाइऑक्साइड", "नाइट्रोजन", "हाइड्रोजन"],
"answer_en": "Oxygen",
"answer_hi": "ऑक्सीजन"
},
{
"num": 21,
"question_en": "The Great Wall of China is located in which country?",
"question_hi": "चीन की महान दीवार किस देश में स्थित है?",
"options_en": ["India", "China", "Japan", "Mongolia"],
"options_hi": ["भारत", "चीन", "जापान", "मंगोलिया"],
"answer_en": "China",
"answer_hi": "चीन"
},
{
"num": 22,
"question_en": "What is the main component of natural gas?",
"question_hi": "प्राकृतिक गैस का मुख्य घटक क्या है?",
"options_en": ["Methane", "Ethane", "Propane", "Butane"],
"options_hi": ["मीथेन", "ईथेन", "प्रोपेन", "ब्यूटेन"],
"answer_en": "Methane",
"answer_hi": "मीथेन"
},
{
"num": 23,
"question_en": "Which device is used to convert mechanical energy into electrical energy?",
"question_hi": "यांत्रिक ऊर्जा को विद्युत ऊर्जा में परिवर्तित करने के लिए किस उपकरण का उपयोग किया जाता है?",
"options_en": ["Motor", "Generator", "Transformer", "Inverter"],
"options_hi": ["मोटर", "जनरेटर", "ट्रांसफार्मर", "इन्वर्टर"],
"answer_en": "Generator",
"answer_hi": "जनरेटर"
},
{
"num": 24,
"question_en": "What is the boiling point of water at sea level in Celsius?",
"question_hi": "समुद्र तल पर पानी का क्वथनांक सेल्सियस में क्या है?",
"options_en": ["90°C", "100°C", "110°C", "120°C"],
"options_hi": ["90°C", "100°C", "110°C", "120°C"],
"answer_en": "100°C",
"answer_hi": "100°C"
},
{
"num": 25,
"question_en": "Which vitamin is produced when the human body is exposed to sunlight?",
"question_hi": "मानव शरीर सूर्य के प्रकाश के संपर्क में आने पर कौन सा विटामिन उत्पन्न होता है?",
"options_en": ["Vitamin A", "Vitamin B12", "Vitamin C", "Vitamin D"],
"options_hi": ["विटामिन ए", "विटामिन बी12", "विटामिन सी", "विटामिन डी"],
"answer_en": "Vitamin D",
"answer_hi": "विटामिन डी"
},
{
"num": 26,
"question_en": "Which of these is a non-metal?",
"question_hi": "निम्नलिखित में से कौन सा एक अधातु है?",
"options_en": ["Iron", "Copper", "Sulphur", "Silver"],
"options_hi": ["लोहा", "तांबा", "सल्फर", "चांदी"],
"answer_en": "Sulphur",
"answer_hi": "सल्फर"
},
{
"num": 27,
"question_en": "What does RAM stand for?",
"question_hi": "RAM का क्या अर्थ है?",
"options_en": ["Random Access Memory", "Read Access Memory", "Rapid Access Memory", "Random Available Memory"],
"options_hi": ["रैंडम एक्सेस मेमोरी", "रीड एक्सेस मेमोरी", "रैपिड एक्सेस मेमोरी", "रैंडम अवेलेबल मेमोरी"],
"answer_en": "Random Access Memory",
"answer_hi": "रैंडम एक्सेस मेमोरी"
},
{
"num": 28,
"question_en": "Which planet is known as the Red Planet?",
"question_hi": "किस ग्रह को लाल ग्रह के रूप में जाना जाता है?",
"options_en": ["Venus", "Mars", "Jupiter", "Saturn"],
"options_hi": ["शुक्र", "मंगल", "बृहस्पति", "शनि"],
"answer_en": "Mars",
"answer_hi": "मंगल"
},
{
"num": 29,
"question_en": "What is the main function of a capacitor in an electric circuit?",
"question_hi": "विद्युत परिपथ में संधारित्र का मुख्य कार्य क्या है?",
"options_en": ["To store charge", "To resist current", "To amplify signal", "To convert AC to DC"],
"options_hi": ["चार्ज संग्रहीत करने के लिए", "धारा का विरोध करने के लिए", "सिग्नल को प्रवर्धित करने के लिए", "AC को DC में बदलने के लिए"],
"answer_en": "To store charge",
"answer_hi": "चार्ज संग्रहीत करने के लिए"
},
{
"num": 30,
"question_en": "Which of these is a greenhouse gas?",
"question_hi": "निम्नलिखित में से कौन सी ग्रीनहाउस गैस है?",
"options_en": ["Oxygen", "Nitrogen", "Methane", "Hydrogen"],
"options_hi": ["ऑक्सीजन", "नाइट्रोजन", "मीथेन", "हाइड्रोजन"],
"answer_en": "Methane",
"answer_hi": "मीथेन"
},
{
"num": 31,
"question_en": "What is the SI unit of power?",
"question_hi": "शक्ति की SI इकाई क्या है?",
"options_en": ["Watt", "Joule", "Volt", "Ampere"],
"options_hi": ["वाट", "जूल", "वोल्ट", "एम्पीयर"],
"answer_en": "Watt",
"answer_hi": "वाट"
},
{
"num": 32,
"question_en": "Which instrument is used to measure electric current?",
"question_hi": "विद्युत धारा मापने के लिए किस उपकरण का उपयोग किया जाता है?",
"options_en": ["Voltmeter", "Ammeter", "Ohmmeter", "Wattmeter"],
"options_hi": ["वोल्टमीटर", "एमीटर", "ओममीटर", "वाटमीटर"],
"answer_en": "Ammeter",
"answer_hi": "एमीटर"
},
{
"num": 33,
"question_en": "Which country is known as the Land of the Rising Sun?",
"question_hi": "किस देश को उगते सूरज की भूमि के रूप में जाना जाता है?",
"options_en": ["China", "Japan", "India", "Thailand"],
"options_hi": ["चीन", "जापान", "भारत", "थाईलैंड"],
"answer_en": "Japan",
"answer_hi": "जापान"
},
{
"num": 34,
"question_en": "What is the chemical formula of table salt?",
"question_hi": "साधारण नमक का रासायनिक सूत्र क्या है?",
"options_en": ["NaCl", "KCl", "CaCl2", "MgCl2"],
"options_hi": ["NaCl", "KCl", "CaCl2", "MgCl2"],
"answer_en": "NaCl",
"answer_hi": "NaCl"
},
{
"num": 35,
"question_en": "Which of these is a renewable energy source?",
"question_hi": "निम्नलिखित में से कौन सा नवीकरणीय ऊर्जा स्रोत है?",
"options_en": ["Coal", "Natural Gas", "Wind", "Nuclear"],
"options_hi": ["कोयला", "प्राकृतिक गैस", "पवन", "परमाणु"],
"answer_en": "Wind",
"answer_hi": "पवन"
},
{
"num": 36,
"question_en": "What does CPU stand for?",
"question_hi": "CPU का क्या अर्थ है?",
"options_en": ["Central Processing Unit", "Computer Processing Unit", "Central Program Unit", "Computer Program Unit"],
"options_hi": ["सेंट्रल प्रोसेसिंग यूनिट", "कंप्यूटर प्रोसेसिंग यूनिट", "सेंट्रल प्रोग्राम यूनिट", "कंप्यूटर प्रोग्राम यूनिट"],
"answer_en": "Central Processing Unit",
"answer_hi": "सेंट्रल प्रोसेसिंग यूनिट"
},
{
"num": 37,
"question_en": "Which organ in the human body produces insulin?",
"question_hi": "मानव शरीर में कौन सा अंग इंसुलिन उत्पन्न करता है?",
"options_en": ["Liver", "Pancreas", "Kidney", "Stomach"],
"options_hi": ["यकृत", "अग्न्याशय", "गुर्दा", "पेट"],
"answer_en": "Pancreas",
"answer_hi": "अग्न्याशय"
},
{
"num": 38,
"question_en": "What is the unit of resistance?",
"question_hi": "प्रतिरोध की इकाई क्या है?",
"options_en": ["Ohm", "Volt", "Ampere", "Watt"],
"options_hi": ["ओम", "वोल्ट", "एम्पीयर", "वाट"],
"answer_en": "Ohm",
"answer_hi": "ओम"
},
{
"num": 39,
"question_en": "Which gas is used in balloons to make them float?",
"question_hi": "गुब्बारों को तैरने के लिए किस गैस का उपयोग किया जाता है?",
"options_en": ["Oxygen", "Hydrogen", "Helium", "Nitrogen"],
"options_hi": ["ऑक्सीजन", "हाइड्रोजन", "हीलियम", "नाइट्रोजन"],
"answer_en": "Helium",
"answer_hi": "हीलियम"
},
{
"num": 40,
"question_en": "What is the largest planet in our solar system?",
"question_hi": "हमारे सौर मंडल का सबसे बड़ा ग्रह कौन सा है?",
"options_en": ["Earth", "Jupiter", "Saturn", "Neptune"],
"options_hi": ["पृथ्वी", "बृहस्पति", "शनि", "वरुण"],
"answer_en": "Jupiter",
"answer_hi": "बृहस्पति"
},
{
"num": 41,
"question_en": "Which of these is a semiconductor material?",
"question_hi": "निम्नलिखित में से कौन सा एक अर्धचालक पदार्थ है?",
"options_en": ["Copper", "Silicon", "Aluminum", "Silver"],
"options_hi": ["तांबा", "सिलिकॉन", "एल्यूमीनियम", "चांदी"],
"answer_en": "Silicon",
"answer_hi": "सिलिकॉन"
},
{
"num": 42,
"question_en": "What does WWW stand for?",
"question_hi": "WWW का क्या अर्थ है?",
"options_en": ["World Wide Web", "World Web Wide", "Web World Wide", "Wide World Web"],
"options_hi": ["वर्ल्ड वाइड वेब", "वर्ल्ड वेब वाइड", "वेब वर्ल्ड वाइड", "वाइड वर्ल्ड वेब"],
"answer_en": "World Wide Web",
"answer_hi": "वर्ल्ड वाइड वेब"
},
{
"num": 43,
"question_en": "Which vitamin is also known as ascorbic acid?",
"question_hi": "किस विटामिन को एस्कॉर्बिक एसिड के रूप में भी जाना जाता है?",
"options_en": ["Vitamin A", "Vitamin B", "Vitamin C", "Vitamin D"],
"options_hi": ["विटामिन ए", "विटामिन बी", "विटामिन सी", "विटामिन डी"],
"answer_en": "Vitamin C",
"answer_hi": "विटामिन सी"
},
{
"num": 44,
"question_en": "What is the unit of frequency?",
"question_hi": "आवृत्ति की इकाई क्या है?",
"options_en": ["Hertz", "Decibel", "Watt", "Lumen"],
"options_hi": ["हर्ट्ज", "डेसिबल", "वाट", "लुमेन"],
"answer_en": "Hertz",
"answer_hi": "हर्ट्ज"
},
{
"num": 45,
"question_en": "Which of these is a mammal?",
"question_hi": "निम्नलिखित में से कौन सा एक स्तनपायी है?",
"options_en": ["Shark", "Whale", "Crocodile", "Snake"],
"options_hi": ["शार्क", "व्हेल", "मगरमच्छ", "साँप"],
"answer_en": "Whale",
"answer_hi": "व्हेल"
},
{
"num": 46,
"question_en": "What is the main component of the sun?",
"question_hi": "सूर्य का मुख्य घटक क्या है?",
"options_en": ["Hydrogen", "Helium", "Oxygen", "Carbon"],
"options_hi": ["हाइड्रोजन", "हीलियम", "ऑक्सीजन", "कार्बन"],
"answer_en": "Hydrogen",
"answer_hi": "हाइड्रोजन"
},
{
"num": 47,
"question_en": "Which of these is a prime number?",
"question_hi": "निम्नलिखित में से कौन सी एक अभाज्य संख्या है?",
"options_en": ["9", "15", "17", "21"],
"options_hi": ["9", "15", "17", "21"],
"answer_en": "17",
"answer_hi": "17"
},
{
"num": 48,
"question_en": "What is the chemical symbol for Sodium?",
"question_hi": "सोडियम का रासायनिक प्रतीक क्या है?",
"options_en": ["S", "So", "Na", "Ni"],
"options_hi": ["S", "So", "Na", "Ni"],
"answer_en": "Na",
"answer_hi": "Na"
},
{
"num": 49,
"question_en": "Which of these is NOT an operating system?",
"question_hi": "निम्नलिखित में से कौन सा ऑपरेटिंग सिस्टम नहीं है?",
"options_en": ["Windows", "Linux", "Android", "Microsoft Office"],
"options_hi": ["विंडोज", "लिनक्स", "एंड्रॉइड", "माइक्रोसॉफ्ट ऑफिस"],
"answer_en": "Microsoft Office",
"answer_hi": "माइक्रोसॉफ्ट ऑफिस"
},
{
"num": 50,
"question_en": "Which organ in the human body is responsible for pumping blood?",
"question_hi": "मानव शरीर में कौन सा अंग रक्त पंप करने के लिए जिम्मेदार है?",
"options_en": ["Liver", "Heart", "Kidney", "Lungs"],
"options_hi": ["यकृत", "हृदय", "गुर्दा", "फेफड़े"],
"answer_en": "Heart",
"answer_hi": "हृदय"
}];


// --------------------------- GLOBAL VARS -----------------------------
// --------------------------- GLOBAL VARS -----------------------------
let currentQuestion = 0;
let language = "en";
let timeLeft = 60 * 60; 
let timerInterval;

// ----------------- Load Question -----------------
function loadQuestion(index) {
    const q = questions[index];
    if (!q) return; //  undefined error fix

    document.getElementById("question").textContent =
        `${q.num}. ${language === "en" ? q.question_en : q.question_hi}`;

    document.getElementById("questionCounter").textContent =
        `Question ${index + 1} of ${questions.length}`;

    const optionsElement = document.getElementById("options");
    optionsElement.innerHTML = "";

    const options = language === "en" ? q.options_en : q.options_hi;

    options.forEach(option => {
        const isSelected = q.selected === option;

        const div = document.createElement("div");
        div.className = "option-box";

        div.style = `
            border: 2px solid ${isSelected ? "#007bff" : "#ccc"};
            background-color: ${isSelected ? "#e7f1ff" : "white"};
            padding: 10px;
            border-radius: 8px;
            margin: 6px 0;
            cursor: pointer;
        `;

        div.innerHTML = `
            <input type="radio" name="option" value="${option}" 
            ${isSelected ? "checked" : ""} style="margin-right:8px;">
            ${option}
        `;

        div.addEventListener("click", () => {
            markAttempted(index, option);
            loadQuestion(index);
        });

        optionsElement.appendChild(div);
    });

    updateNavigation();
}

// ----------------- Attempt Mark -----------------
function markAttempted(index, selectedAnswer) {
    questions[index].attempted = true;
    questions[index].selected = selectedAnswer;
    updateNavigation();
}

// ----------------- Next / Previous -----------------
function nextQuestion() {
    if (currentQuestion < questions.length - 1) {
        currentQuestion++;
        loadQuestion(currentQuestion);
    }
}

function prevQuestion() {
    if (currentQuestion > 0) {
        currentQuestion--;
        loadQuestion(currentQuestion);
    }
}

function changeLanguage() {
    language = document.getElementById("languageSelect").value;
    loadQuestion(currentQuestion);
}

// ----------------- Final Submit -----------------
function submitQuiz() {
    let confirmation = confirm("Are you sure you want to submit the test?");
    if (!confirmation) return;

    let attempted = 0;
    let notAttempted = 0;
    let score = 0;
    const results = [];

    questions.forEach(q => {
        if (q.attempted) {
            attempted++;

            if (q.selected === q.answer_en || q.selected === q.answer_hi) {
                score++;
            }
        } else {
            notAttempted++;
        }

        results.push({
            question: language === "en" ? q.question_en : q.question_hi,
            selected: q.selected || "Not Answered",
            correct: language === "en" ? q.answer_en : q.answer_hi
        });
    });

    localStorage.setItem("attempted", attempted);
    localStorage.setItem("notAttempted", notAttempted);
    localStorage.setItem("score", score);
    localStorage.setItem("results", JSON.stringify(results));

    let viewResult = confirm("Test submitted! Do you want to view result?");
    if (viewResult) {
        window.location.href = "/RTS/public/Deshbord/category/test/submit-test.html";
    }
}

// ----------------- Navigation Circles -----------------
function updateNavigation() {
    const nav = document.getElementById("circleContainer");
    nav.innerHTML = "";

    questions.forEach((q, i) => {
        let color = "gray";
        if (i === currentQuestion) color = "blue";
        else if (q.attempted) color = "green";

        nav.innerHTML += `
            <div class="circle" style="background:${color};"
            onclick="jumpToQuestion(${i})">${i + 1}</div>
        `;
    });
}

function jumpToQuestion(index) {
    currentQuestion = index;
    loadQuestion(index);
}

// ----------------- Timer -----------------
function startTimer() {
    const timerElement = document.getElementById("timer");

    timerInterval = setInterval(() => {
        if (timeLeft <= 0) {
            clearInterval(timerInterval);
            alert("Time's up!");
            submitQuiz();
        } else {
            const hours = String(Math.floor(timeLeft / 3600)).padStart(2, "0");
            const minutes = String(Math.floor((timeLeft % 3600) / 60)).padStart(2, "0");
            const seconds = String(timeLeft % 60).padStart(2, "0");

            timerElement.textContent = `Time Left: ${hours}:${minutes}:${seconds}`;
            timeLeft--;
        }
    }, 1000);
}

// ----------------- Camera & Movement Detection -----------------
let videoStream;
let movementCount = 0;

function startCamera() {
    const container = document.createElement("div");
    container.id = "camera-container";
    container.style = `
        position:fixed; top:10px; left:10px; width:130px; height:130px;
        border-radius:50%; overflow:hidden; border:3px solid red; z-index:9999;
    `;

    document.body.appendChild(container);

    const video = document.createElement("video");
    video.autoplay = true;
    video.playsinline = true;
    video.style = "width:100%; height:100%; object-fit:cover;";
    container.appendChild(video);

    navigator.mediaDevices.getUserMedia({ video: true })
        .then(stream => {
            video.srcObject = stream;
            videoStream = stream;
            detectMovement(video);
        })
        .catch(() => alert("Camera access denied!"));
}

function detectMovement(video) {
    const canvas = document.createElement("canvas");
    const ctx = canvas.getContext("2d");
    canvas.width = 160;
    canvas.height = 160;

    let lastData = null;

    setInterval(() => {
        ctx.drawImage(video, 0, 0, 160, 160);
        const data = ctx.getImageData(0, 0, 160, 160);

        if (lastData) {
            let diff = 0;
            for (let i = 0; i < data.data.length; i += 4) {
                diff += Math.abs(data.data[i] - lastData.data[i]);
            }

            if (diff > 1000000) {
                movementCount++;

                if (movementCount === 1) alert("⚠ Alert 1: No movement detected!");
                if (movementCount === 2) alert("⚠ Alert 2: Head not moving!");
                if (movementCount === 3) {
                    alert("⚠ Alert 3: Restarting test...");
                    restartTest();
                }
            }
        }
        lastData = data;

    }, 2000);
}

function restartTest() {
    if (videoStream) videoStream.getTracks().forEach(t => t.stop());

    const cam = document.getElementById("camera-container");
    if (cam) cam.remove();

    movementCount = 0;
    currentQuestion = 0;
    timeLeft = 60 * 60;

    questions.forEach(q => {
        q.attempted = false;
        q.selected = null;
    });

    loadQuestion(0);
    startTimer();
    startCamera();
}

// ----------------- Page Load -----------------
window.onload = function () {
    loadQuestion(currentQuestion);
    startTimer();
    startCamera();
};