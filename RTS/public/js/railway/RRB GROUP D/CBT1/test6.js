const questions =[
{
"num": 1,
"question_en": "Find the missing number: 3, 8, 15, 24, 35, ?",
"question_hi": "लुप्त संख्या ज्ञात करें: 3, 8, 15, 24, 35, ?",
"options_en": ["46", "48", "50", "52"],
"options_hi": ["46", "48", "50", "52"],
"answer_en": "48",
"answer_hi": "48",
"attempted": false,
"selected": ""
},
{
"num": 2,
"question_en": "If 'DOG' is coded as 'FRJ', then 'CAT' is coded as?",
"question_hi": "यदि 'DOG' को 'FRJ' से कूटबद्ध किया जाता है, तो 'CAT' को किससे कूटबद्ध किया जाएगा?",
"options_en": ["ECV", "FCW", "EDW", "FDW"],
"options_hi": ["ECV", "FCW", "EDW", "FDW"],
"answer_en": "ECV",
"answer_hi": "ECV",
"attempted": false,
"selected": ""
},
{
"num": 3,
"question_en": "Find the missing term: 5, 11, 19, 29, 41, ?",
"question_hi": "लुप्त पद ज्ञात करें: 5, 11, 19, 29, 41, ?",
"options_en": ["51", "53", "55", "57"],
"options_hi": ["51", "53", "55", "57"],
"answer_en": "55",
"answer_hi": "55",
"attempted": false,
"selected": ""
},
{
"num": 4,
"question_en": "If 'TRAIN' is coded as 'USBJO', then 'PLANE' is coded as?",
"question_hi": "यदि 'TRAIN' को 'USBJO' से कूटबद्ध किया जाता है, तो 'PLANE' को किससे कूटबद्ध किया जाएगा?",
"options_en": ["QMBMF", "QMBOG", "QNBOF", "QMBOF"],
"options_hi": ["QMBMF", "QMBOG", "QNBOF", "QMBOF"],
"answer_en": "QMBOF",
"answer_hi": "QMBOF",
"attempted": false,
"selected": ""
},
{
"num": 5,
"question_en": "Find the missing number: 2, 6, 12, 20, 30, ?",
"question_hi": "लुप्त संख्या ज्ञात करें: 2, 6, 12, 20, 30, ?",
"options_en": ["40", "42", "44", "46"],
"options_hi": ["40", "42", "44", "46"],
"answer_en": "42",
"answer_hi": "42",
"attempted": false,
"selected": ""
},
{
"num": 6,
"question_en": "If 'RED' is coded as '672', then 'BLUE' is coded as?",
"question_hi": "यदि 'RED' को '672' से कूटबद्ध किया जाता है, तो 'BLUE' को किससे कूटबद्ध किया जाएगा?",
"options_en": ["5136", "5236", "5135", "5235"],
"options_hi": ["5136", "5236", "5135", "5235"],
"answer_en": "5136",
"answer_hi": "5136",
"attempted": false,
"selected": ""
},
{
"num": 7,
"question_en": "Find the missing term: 81, 27, 9, 3, ?",
"question_hi": "लुप्त पद ज्ञात करें: 81, 27, 9, 3, ?",
"options_en": ["0", "1", "2", "1.5"],
"options_hi": ["0", "1", "2", "1.5"],
"answer_en": "1",
"answer_hi": "1",
"attempted": false,
"selected": ""
},
{
"num": 8,
"question_en": "If 'HOTEL' is coded as 'LPSXI', then 'GUEST' is coded as?",
"question_hi": "यदि 'HOTEL' को 'LPSXI' से कूटबद्ध किया जाता है, तो 'GUEST' को किससे कूटबद्ध किया जाएगा?",
"options_en": ["JYHWX", "JYIWX", "JZHWX", "JZIWX"],
"options_hi": ["JYHWX", "JYIWX", "JZHWX", "JZIWX"],
"answer_en": "JYIWX",
"answer_hi": "JYIWX",
"attempted": false,
"selected": ""
},
{
"num": 9,
"question_en": "Find the missing number: 1, 4, 9, 16, 25, ?",
"question_hi": "लुप्त संख्या ज्ञात करें: 1, 4, 9, 16, 25, ?",
"options_en": ["35", "36", "49", "64"],
"options_hi": ["35", "36", "49", "64"],
"answer_en": "36",
"answer_hi": "36",
"attempted": false,
"selected": ""
},
{
"num": 10,
"question_en": "If 'MOUSE' is coded as 'PRXUH', then 'KEYBOARD' is coded as?",
"question_hi": "यदि 'MOUSE' को 'PRXUH' से कूटबद्ध किया जाता है, तो 'KEYBOARD' को किससे कूटबद्ध किया जाएगा?",
"options_en": ["NHBEDUQG", "NHBERUQG", "NHBERUQH", "NHBEDUQH"],
"options_hi": ["NHBEDUQG", "NHBERUQG", "NHBERUQH", "NHBEDUQH"],
"answer_en": "NHBERUQG",
"answer_hi": "NHBERUQG",
"attempted": false,
"selected": ""
},
{
"num": 11,
"question_en": "Find the missing term: 3, 6, 18, 72, 360, ?",
"question_hi": "लुप्त पद ज्ञात करें: 3, 6, 18, 72, 360, ?",
"options_en": ["1440", "1800", "2160", "2520"],
"options_hi": ["1440", "1800", "2160", "2520"],
"answer_en": "2160",
"answer_hi": "2160",
"attempted": false,
"selected": ""
},
{
"num": 12,
"question_en": "If 'DAY' is coded as 'FCZ', then 'NIGHT' is coded as?",
"question_hi": "यदि 'DAY' को 'FCZ' से कूटबद्ध किया जाता है, तो 'NIGHT' को किससे कूटबद्ध किया जाएगा?",
"options_en": ["PKIJV", "PKJIV", "PLIJV", "PLJIV"],
"options_hi": ["PKIJV", "PKJIV", "PLIJV", "PLJIV"],
"answer_en": "PKIJV",
"answer_hi": "PKIJV",
"attempted": false,
"selected": ""
},
{
"num": 13,
"question_en": "Find the missing number: 11, 13, 17, 19, 23, ?",
"question_hi": "लुप्त संख्या ज्ञात करें: 11, 13, 17, 19, 23, ?",
"options_en": ["27", "29", "31", "33"],
"options_hi": ["27", "29", "31", "33"],
"answer_en": "29",
"answer_hi": "29",
"attempted": false,
"selected": ""
},
{
"num": 14,
"question_en": "If 'APPLE' is coded as 'BQQMF', then 'ORANGE' is coded as?",
"question_hi": "यदि 'APPLE' को 'BQQMF' से कूटबद्ध किया जाता है, तो 'ORANGE' को किससे कूटबद्ध किया जाएगा?",
"options_en": ["PSBOHF", "PSBOIF", "PSBPHF", "PSBPIF"],
"options_hi": ["PSBOHF", "PSBOIF", "PSBPHF", "PSBPIF"],
"answer_en": "PSBOHF",
"answer_hi": "PSBOHF",
"attempted": false,
"selected": ""
},
{
"num": 15,
"question_en": "Find the missing term: 0.5, 2, 4.5, 8, 12.5, ?",
"question_hi": "लुप्त पद ज्ञात करें: 0.5, 2, 4.5, 8, 12.5, ?",
"options_en": ["16", "17.5", "18", "18.5"],
"options_hi": ["16", "17.5", "18", "18.5"],
"answer_en": "18",
"answer_hi": "18",
"attempted": false,
"selected": ""
},
{
"num": 16,
"question_en": "If 'ZOO' is coded as 'APP', then 'PARK' is coded as?",
"question_hi": "यदि 'ZOO' को 'APP' से कूटबद्ध किया जाता है, तो 'PARK' को किससे कूटबद्ध किया जाएगा?",
"options_en": ["QBSL", "QBTL", "RBSL", "RBTL"],
"options_hi": ["QBSL", "QBTL", "RBSL", "RBTL"],
"answer_en": "QBSL",
"answer_hi": "QBSL",
"attempted": false,
"selected": ""
},
{
"num": 17,
"question_en": "Find the missing number: 100, 95, 85, 70, 50, ?",
"question_hi": "लुप्त संख्या ज्ञात करें: 100, 95, 85, 70, 50, ?",
"options_en": ["30", "25", "20", "15"],
"options_hi": ["30", "25", "20", "15"],
"answer_en": "25",
"answer_hi": "25",
"attempted": false,
"selected": ""
},
{
"num": 18,
"question_en": "If 'MATH' is coded as 'NZWG', then 'SCIENCE' is coded as?",
"question_hi": "यदि 'MATH' को 'NZWG' से कूटबद्ध किया जाता है, तो 'SCIENCE' को किससे कूटबद्ध किया जाएगा?",
"options_en": ["TDJFMDD", "TDJFMDF", "TDJFNDF", "TDJFNDD"],
"options_hi": ["TDJFMDD", "TDJFMDF", "TDJFNDF", "TDJFNDD"],
"answer_en": "TDJFMDD",
"answer_hi": "TDJFMDD",
"attempted": false,
"selected": ""
},
{
"num": 19,
"question_en": "Find the missing term: 2, 4, 8, 14, 22, ?",
"question_hi": "लुप्त पद ज्ञात करें: 2, 4, 8, 14, 22, ?",
"options_en": ["30", "32", "34", "36"],
"options_hi": ["30", "32", "34", "36"],
"answer_en": "32",
"answer_hi": "32",
"attempted": false,
"selected": ""
},
{
"num": 20,
"question_en": "If 'WORK' is coded as 'XPSL', then 'HARD' is coded as?",
"question_hi": "यदि 'WORK' को 'XPSL' से कूटबद्ध किया जाता है, तो 'HARD' को किससे कूटबद्ध किया जाएगा?",
"options_en": ["IBSE", "ICSE", "IBSF", "ICSF"],
"options_hi": ["IBSE", "ICSE", "IBSF", "ICSF"],
"answer_en": "IBSE",
"answer_hi": "IBSE",
"attempted": false,
"selected": ""
},
{
"num": 21,
"question_en": "Find the missing number: 1, 3, 7, 13, 21, ?",
"question_hi": "लुप्त संख्या ज्ञात करें: 1, 3, 7, 13, 21, ?",
"options_en": ["29", "31", "33", "35"],
"options_hi": ["29", "31", "33", "35"],
"answer_en": "31",
"answer_hi": "31",
"attempted": false,
"selected": ""
},
{
"num": 22,
"question_en": "If 'RIVER' is coded as 'TKGXT', then 'MOUNTAIN' is coded as?",
"question_hi": "यदि 'RIVER' को 'TKGXT' से कूटबद्ध किया जाता है, तो 'MOUNTAIN' को किससे कूटबद्ध किया जाएगा?",
"options_en": ["OQWPVCKP", "OQWPVCLP", "OQWPWCKP", "OQWPWCLP"],
"options_hi": ["OQWPVCKP", "OQWPVCLP", "OQWPWCKP", "OQWPWCLP"],
"answer_en": "OQWPVCKP",
"answer_hi": "OQWPVCKP",
"attempted": false,
"selected": ""
},
{
"num": 23,
"question_en": "Find the missing term: 256, 64, 16, 4, ?",
"question_hi": "लुप्त पद ज्ञात करें: 256, 64, 16, 4, ?",
"options_en": ["2", "1", "0.5", "0.25"],
"options_hi": ["2", "1", "0.5", "0.25"],
"answer_en": "1",
"answer_hi": "1",
"attempted": false,
"selected": ""
},
{
"num": 24,
"question_en": "If 'SUN' is coded as 'VXQ', then 'MOON' is coded as?",
"question_hi": "यदि 'SUN' को 'VXQ' से कूटबद्ध किया जाता है, तो 'MOON' को किससे कूटबद्ध किया जाएगा?",
"options_en": ["PRRQ", "PRRS", "PSRQ", "PSRS"],
"options_hi": ["PRRQ", "PRRS", "PSRQ", "PSRS"],
"answer_en": "PRRQ",
"answer_hi": "PRRQ",
"attempted": false,
"selected": ""
},
{
"num": 25,
"question_en": "Find the missing number: 10, 20, 31, 43, 56, ?",
"question_hi": "लुप्त संख्या ज्ञात करें: 10, 20, 31, 43, 56, ?",
"options_en": ["68", "70", "72", "74"],
"options_hi": ["68", "70", "72", "74"],
"answer_en": "70",
"answer_hi": "70",
"attempted": false,
"selected": ""
},
{
"num": 26,
"question_en": "If 'TABLE' is coded as 'UBBMF', then 'CHAIR' is coded as?",
"question_hi": "यदि 'TABLE' को 'UBBMF' से कूटबद्ध किया जाता है, तो 'CHAIR' को किससे कूटबद्ध किया जाएगा?",
"options_en": ["DIBJS", "DIBJT", "DI BJS", "DI BKT"],
"options_hi": ["DIBJS", "DIBJT", "DI BJS", "DI BKT"],
"answer_en": "DIBJS",
"answer_hi": "DIBJS",
"attempted": false,
"selected": ""
},
{
"num": 27,
"question_en": "Find the missing term: 0, 6, 24, 60, 120, ?",
"question_hi": "लुप्त पद ज्ञात करें: 0, 6, 24, 60, 120, ?",
"options_en": ["180", "200", "210", "240"],
"options_hi": ["180", "200", "210", "240"],
"answer_en": "210",
"answer_hi": "210",
"attempted": false,
"selected": ""
},
{
"num": 28,
"question_en": "If 'LIGHT' is coded as 'MJHIU', then 'DARK' is coded as?",
"question_hi": "यदि 'LIGHT' को 'MJHIU' से कूटबद्ध किया जाता है, तो 'DARK' को किससे कूटबद्ध किया जाएगा?",
"options_en": ["EBSL", "EBSM", "EBTL", "EBTM"],
"options_hi": ["EBSL", "EBSM", "EBTL", "EBTM"],
"answer_en": "EBSL",
"answer_hi": "EBSL",
"attempted": false,
"selected": ""
},
{
"num": 29,
"question_en": "Find the missing number: 12, 36, 108, 324, ?",
"question_hi": "लुप्त संख्या ज्ञात करें: 12, 36, 108, 324, ?",
"options_en": ["648", "972", "1296", "1944"],
"options_hi": ["648", "972", "1296", "1944"],
"answer_en": "972",
"answer_hi": "972",
"attempted": false,
"selected": ""
},
{
"num": 30,
"question_en": "If 'GREEN' is coded as 'ITGGP', then 'YELLOW' is coded as?",
"question_hi": "यदि 'GREEN' को 'ITGGP' से कूटबद्ध किया जाता है, तो 'YELLOW' को किससे कूटबद्ध किया जाएगा?",
"options_en": ["AGNNQY", "AGNNQX", "AHNNQY", "AHNNQX"],
"options_hi": ["AGNNQY", "AGNNQX", "AHNNQY", "AHNNQX"],
"answer_en": "AGNNQY",
"answer_hi": "AGNNQY",
"attempted": false,
"selected": ""
},
{
"num": 31,
"question_en": "Find the missing term: 7, 14, 28, 56, 112, ?",
"question_hi": "लुप्त पद ज्ञात करें: 7, 14, 28, 56, 112, ?",
"options_en": ["196", "210", "224", "240"],
"options_hi": ["196", "210", "224", "240"],
"answer_en": "224",
"answer_hi": "224",
"attempted": false,
"selected": ""
},
{
"num": 32,
"question_en": "If 'FISH' is coded as 'GJTI', then 'BIRD' is coded as?",
"question_hi": "यदि 'FISH' को 'GJTI' से कूटबद्ध किया जाता है, तो 'BIRD' को किससे कूटबद्ध किया जाएगा?",
"options_en": ["CJSE", "CKSE", "CJSF", "CKSF"],
"options_hi": ["CJSE", "CKSE", "CJSF", "CKSF"],
"answer_en": "CJSE",
"answer_hi": "CJSE",
"attempted": false,
"selected": ""
},
{
"num": 33,
"question_en": "Find the missing number: 15, 30, 60, 120, 240, ?",
"question_hi": "लुप्त संख्या ज्ञात करें: 15, 30, 60, 120, 240, ?",
"options_en": ["360", "480", "500", "520"],
"options_hi": ["360", "480", "500", "520"],
"answer_en": "480",
"answer_hi": "480",
"attempted": false,
"selected": ""
},
{
"num": 34,
"question_en": "If 'RAIN' is coded as 'SBJO', then 'CLOUD' is coded as?",
"question_hi": "यदि 'RAIN' को 'SBJO' से कूटबद्ध किया जाता है, तो 'CLOUD' को किससे कूटबद्ध किया जाएगा?",
"options_en": ["DMPVE", "DMQVE", "DMPWF", "DMQWF"],
"options_hi": ["DMPVE", "DMQVE", "DMPWF", "DMQWF"],
"answer_en": "DMPVE",
"answer_hi": "DMPVE",
"attempted": false,
"selected": ""
},
{
"num": 35,
"question_en": "Find the missing term: 19, 23, 29, 31, 37, ?",
"question_hi": "लुप्त पद ज्ञात करें: 19, 23, 29, 31, 37, ?",
"options_en": ["39", "41", "43", "47"],
"options_hi": ["39", "41", "43", "47"],
"answer_en": "41",
"answer_hi": "41",
"attempted": false,
"selected": ""
},
{
"num": 36,
"question_en": "If 'HOUSE' is coded as 'IPVTF', then 'GARDEN' is coded as?",
"question_hi": "यदि 'HOUSE' को 'IPVTF' से कूटबद्ध किया जाता है, तो 'GARDEN' को किससे कूटबद्ध किया जाएगा?",
"options_en": ["HBSEFO", "HBSFFO", "HBTEFO", "HBTFFO"],
"options_hi": ["HBSEFO", "HBSFFO", "HBTEFO", "HBTFFO"],
"answer_en": "HBSEFO",
"answer_hi": "HBSEFO",
"attempted": false,
"selected": ""
},
{
"num": 37,
"question_en": "Find the missing number: 0, 7, 26, 63, 124, ?",
"question_hi": "लुप्त संख्या ज्ञात करें: 0, 7, 26, 63, 124, ?",
"options_en": ["195", "215", "217", "225"],
"options_hi": ["195", "215", "217", "225"],
"answer_en": "215",
"answer_hi": "215",
"attempted": false,
"selected": ""
},
{
"num": 38,
"question_en": "If 'TIME' is coded as 'UJNF', then 'SPACE' is coded as?",
"question_hi": "यदि 'TIME' को 'UJNF' से कूटबद्ध किया जाता है, तो 'SPACE' को किससे कूटबद्ध किया जाएगा?",
"options_en": ["TQ BDF", "TQBDF", "TQBDG", "TQBDH"],
"options_hi": ["TQ BDF", "TQBDF", "TQBDG", "TQBDH"],
"answer_en": "TQBDF",
"answer_hi": "TQBDF",
"attempted": false,
"selected": ""
},
{
"num": 39,
"question_en": "Find the missing term: 1, 8, 27, 64, 125, ?",
"question_hi": "लुप्त पद ज्ञात करें: 1, 8, 27, 64, 125, ?",
"options_en": ["196", "216", "225", "256"],
"options_hi": ["196", "216", "225", "256"],
"answer_en": "216",
"answer_hi": "216",
"attempted": false,
"selected": ""
},
{
"num": 40,
"question_en": "If 'WATER' is coded as 'XBUFS', then 'EARTH' is coded as?",
"question_hi": "यदि 'WATER' को 'XBUFS' से कूटबद्ध किया जाता है, तो 'EARTH' को किससे कूटबद्ध किया जाएगा?",
"options_en": ["FBSUI", "FBSVI", "FB TUI", "FB TVI"],
"options_hi": ["FBSUI", "FBSVI", "FB TUI", "FB TVI"],
"answer_en": "FBSUI",
"answer_hi": "FBSUI",
"attempted": false,
"selected": ""
},
{
"num": 41,
"question_en": "Find the missing number: 144, 121, 100, 81, 64, ?",
"question_hi": "लुप्त संख्या ज्ञात करें: 144, 121, 100, 81, 64, ?",
"options_en": ["49", "45", "36", "25"],
"options_hi": ["49", "45", "36", "25"],
"answer_en": "49",
"answer_hi": "49",
"attempted": false,
"selected": ""
},
{
"num": 42,
"question_en": "If 'BLACK' is coded as 'CMBDL', then 'WHITE' is coded as?",
"question_hi": "यदि 'BLACK' को 'CMBDL' से कूटबद्ध किया जाता है, तो 'WHITE' को किससे कूटबद्ध किया जाएगा?",
"options_en": ["XIJUF", "XIJUG", "XJKUF", "XJKUG"],
"options_hi": ["XIJUF", "XIJUG", "XJKUF", "XJKUG"],
"answer_en": "XIJUF",
"answer_hi": "XIJUF",
"attempted": false,
"selected": ""
},
{
"num": 43,
"question_en": "Find the missing term: 2, 3, 5, 7, 11, ?",
"question_hi": "लुप्त पद ज्ञात करें: 2, 3, 5, 7, 11, ?",
"options_en": ["13", "15", "17", "19"],
"options_hi": ["13", "15", "17", "19"],
"answer_en": "13",
"answer_hi": "13",
"attempted": false,
"selected": ""
},
{
"num": 44,
"question_en": "If 'SILVER' is coded as 'TKMWFS', then 'GOLD' is coded as?",
"question_hi": "यदि 'SILVER' को 'TKMWFS' से कूटबद्ध किया जाता है, तो 'GOLD' को किससे कूटबद्ध किया जाएगा?",
"options_en": ["HPME", "HPNE", "HQME", "HQNE"],
"options_hi": ["HPME", "HPNE", "HQME", "HQNE"],
"answer_en": "HPME",
"answer_hi": "HPME",
"attempted": false,
"selected": ""
},
{
"num": 45,
"question_en": "Find the missing number: 50, 45, 40, 35, 30, ?",
"question_hi": "लुप्त संख्या ज्ञात करें: 50, 45, 40, 35, 30, ?",
"options_en": ["20", "25", "28", "30"],
"options_hi": ["20", "25", "28", "30"],
"answer_en": "25",
"answer_hi": "25",
"attempted": false,
"selected": ""
},
{
"num": 46,
"question_en": "If 'PEACE' is coded as 'QF BDF', then 'WAR' is coded as?",
"question_hi": "यदि 'PEACE' को 'QF BDF' से कूटबद्ध किया जाता है, तो 'WAR' को किससे कूटबद्ध किया जाएगा?",
"options_en": ["XBS", "XBT", "YBS", "YBT"],
"options_hi": ["XBS", "XBT", "YBS", "YBT"],
"answer_en": "XBS",
"answer_hi": "XBS",
"attempted": false,
"selected": ""
},
{
"num": 47,
"question_en": "Find the missing term: 3, 9, 27, 81, 243, ?",
"question_hi": "लुप्त पद ज्ञात करें: 3, 9, 27, 81, 243, ?",
"options_en": ["486", "729", "972", "1080"],
"options_hi": ["486", "729", "972", "1080"],
"answer_en": "729",
"answer_hi": "729",
"attempted": false,
"selected": ""
},
{
"num": 48,
"question_en": "If 'FRIEND' is coded as 'GSJFOE', then 'ENEMY' is coded as?",
"question_hi": "यदि 'FRIEND' को 'GSJFOE' से कूटबद्ध किया जाता है, तो 'ENEMY' को किससे कूटबद्ध किया जाएगा?",
"options_en": ["FOFNZ", "FOFOZ", "FPFNZ", "FPFOZ"],
"options_hi": ["FOFNZ", "FOFOZ", "FPFNZ", "FPFOZ"],
"answer_en": "FOFNZ",
"answer_hi": "FOFNZ",
"attempted": false,
"selected": ""
},
{
"num": 22,
"question_en": "If 'RIVER' is coded as 'TKGXT', then 'MOUNTAIN' is coded as?",
"question_hi": "यदि 'RIVER' को 'TKGXT' से कूटबद्ध किया जाता है, तो 'MOUNTAIN' को किससे कूटबद्ध किया जाएगा?",
"options_en": ["OQWPVCKP", "OQWPVCLP", "OQWPWCKP", "OQWPWCLP"],
"options_hi": ["OQWPVCKP", "OQWPVCLP", "OQWPWCKP", "OQWPWCLP"],
"answer_en": "OQWPVCKP",
"answer_hi": "OQWPVCKP",
"attempted": false,
"selected": ""
},
{
"num": 5,
"question_en": "Find the missing number: 2, 6, 12, 20, 30, ?",
"question_hi": "लुप्त संख्या ज्ञात करें: 2, 6, 12, 20, 30, ?",
"options_en": ["40", "42", "44", "46"],
"options_hi": ["40", "42", "44", "46"],
"answer_en": "42",
"answer_hi": "42",
"attempted": false,
"selected": ""
}
];

// --------------------------- GLOBAL VARS -----------------------------
// --------------------------- GLOBAL VARS -----------------------------
let currentQuestion = 0;
let language = "en";
let timeLeft = 60 * 60; 
let timerInterval;

// ----------------- Load Question -----------------
function loadQuestion(index) {
    const q = questions[index];
    if (!q) return; //  undefined error fix

    document.getElementById("question").textContent =
        `${q.num}. ${language === "en" ? q.question_en : q.question_hi}`;

    document.getElementById("questionCounter").textContent =
        `Question ${index + 1} of ${questions.length}`;

    const optionsElement = document.getElementById("options");
    optionsElement.innerHTML = "";

    const options = language === "en" ? q.options_en : q.options_hi;

    options.forEach(option => {
        const isSelected = q.selected === option;

        const div = document.createElement("div");
        div.className = "option-box";

        div.style = `
            border: 2px solid ${isSelected ? "#007bff" : "#ccc"};
            background-color: ${isSelected ? "#e7f1ff" : "white"};
            padding: 10px;
            border-radius: 8px;
            margin: 6px 0;
            cursor: pointer;
        `;

        div.innerHTML = `
            <input type="radio" name="option" value="${option}" 
            ${isSelected ? "checked" : ""} style="margin-right:8px;">
            ${option}
        `;

        div.addEventListener("click", () => {
            markAttempted(index, option);
            loadQuestion(index);
        });

        optionsElement.appendChild(div);
    });

    updateNavigation();
}

// ----------------- Attempt Mark -----------------
function markAttempted(index, selectedAnswer) {
    questions[index].attempted = true;
    questions[index].selected = selectedAnswer;
    updateNavigation();
}

// ----------------- Next / Previous -----------------
function nextQuestion() {
    if (currentQuestion < questions.length - 1) {
        currentQuestion++;
        loadQuestion(currentQuestion);
    }
}

function prevQuestion() {
    if (currentQuestion > 0) {
        currentQuestion--;
        loadQuestion(currentQuestion);
    }
}

function changeLanguage() {
    language = document.getElementById("languageSelect").value;
    loadQuestion(currentQuestion);
}

// ----------------- Final Submit -----------------
function submitQuiz() {
    let confirmation = confirm("Are you sure you want to submit the test?");
    if (!confirmation) return;

    let attempted = 0;
    let notAttempted = 0;
    let score = 0;
    const results = [];

    questions.forEach(q => {
        if (q.attempted) {
            attempted++;

            if (q.selected === q.answer_en || q.selected === q.answer_hi) {
                score++;
            }
        } else {
            notAttempted++;
        }

        results.push({
            question: language === "en" ? q.question_en : q.question_hi,
            selected: q.selected || "Not Answered",
            correct: language === "en" ? q.answer_en : q.answer_hi
        });
    });

    localStorage.setItem("attempted", attempted);
    localStorage.setItem("notAttempted", notAttempted);
    localStorage.setItem("score", score);
    localStorage.setItem("results", JSON.stringify(results));

    let viewResult = confirm("Test submitted! Do you want to view result?");
    if (viewResult) {
        window.location.href = "/RTS/public/Deshbord/category/test/submit-test.html";
    }
}

// ----------------- Navigation Circles -----------------
function updateNavigation() {
    const nav = document.getElementById("circleContainer");
    nav.innerHTML = "";

    questions.forEach((q, i) => {
        let color = "gray";
        if (i === currentQuestion) color = "blue";
        else if (q.attempted) color = "green";

        nav.innerHTML += `
            <div class="circle" style="background:${color};"
            onclick="jumpToQuestion(${i})">${i + 1}</div>
        `;
    });
}

function jumpToQuestion(index) {
    currentQuestion = index;
    loadQuestion(index);
}

// ----------------- Timer -----------------
function startTimer() {
    const timerElement = document.getElementById("timer");

    timerInterval = setInterval(() => {
        if (timeLeft <= 0) {
            clearInterval(timerInterval);
            alert("Time's up!");
            submitQuiz();
        } else {
            const hours = String(Math.floor(timeLeft / 3600)).padStart(2, "0");
            const minutes = String(Math.floor((timeLeft % 3600) / 60)).padStart(2, "0");
            const seconds = String(timeLeft % 60).padStart(2, "0");

            timerElement.textContent = `Time Left: ${hours}:${minutes}:${seconds}`;
            timeLeft--;
        }
    }, 1000);
}

// ----------------- Camera & Movement Detection -----------------
let videoStream;
let movementCount = 0;

function startCamera() {
    const container = document.createElement("div");
    container.id = "camera-container";
    container.style = `
        position:fixed; top:10px; left:10px; width:130px; height:130px;
        border-radius:50%; overflow:hidden; border:3px solid red; z-index:9999;
    `;

    document.body.appendChild(container);

    const video = document.createElement("video");
    video.autoplay = true;
    video.playsinline = true;
    video.style = "width:100%; height:100%; object-fit:cover;";
    container.appendChild(video);

    navigator.mediaDevices.getUserMedia({ video: true })
        .then(stream => {
            video.srcObject = stream;
            videoStream = stream;
            detectMovement(video);
        })
        .catch(() => alert("Camera access denied!"));
}

function detectMovement(video) {
    const canvas = document.createElement("canvas");
    const ctx = canvas.getContext("2d");
    canvas.width = 160;
    canvas.height = 160;

    let lastData = null;

    setInterval(() => {
        ctx.drawImage(video, 0, 0, 160, 160);
        const data = ctx.getImageData(0, 0, 160, 160);

        if (lastData) {
            let diff = 0;
            for (let i = 0; i < data.data.length; i += 4) {
                diff += Math.abs(data.data[i] - lastData.data[i]);
            }

            if (diff > 1000000) {
                movementCount++;

                if (movementCount === 1) alert("⚠ Alert 1: No movement detected!");
                if (movementCount === 2) alert("⚠ Alert 2: Head not moving!");
                if (movementCount === 3) {
                    alert("⚠ Alert 3: Restarting test...");
                    restartTest();
                }
            }
        }
        lastData = data;

    }, 2000);
}

function restartTest() {
    if (videoStream) videoStream.getTracks().forEach(t => t.stop());

    const cam = document.getElementById("camera-container");
    if (cam) cam.remove();

    movementCount = 0;
    currentQuestion = 0;
    timeLeft = 60 * 60;

    questions.forEach(q => {
        q.attempted = false;
        q.selected = null;
    });

    loadQuestion(0);
    startTimer();
    startCamera();
}

// ----------------- Page Load -----------------
window.onload = function () {
    loadQuestion(currentQuestion);
    startTimer();
    startCamera();
};